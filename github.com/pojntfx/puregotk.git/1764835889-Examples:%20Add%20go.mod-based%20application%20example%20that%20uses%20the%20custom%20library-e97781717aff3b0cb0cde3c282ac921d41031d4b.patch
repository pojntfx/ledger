From e97781717aff3b0cb0cde3c282ac921d41031d4b Mon Sep 17 00:00:00 2001
From: Felicitas Pojtinger <felicitas@pojtinger.com>
Date: Thu, 04 Dec 2025 00:11:29 -0800
Subject: [PATCH] Examples: Add go.mod-based application example that uses the custom library

Signed-off-by: Felicitas Pojtinger <felicitas@pojtinger.com>
---
diff --git a/examples/myapp-gomod/.gitignore b/examples/myapp-gomod/.gitignore
new file mode 100644
index 0000000000000000000000000000000000000000..52b618aac0d36ad52373b2483edaf785e35b58b1
--- /dev/null
+++ b/examples/myapp-gomod/.gitignore
@@ -0,0 +1,7 @@
+_build
+repo
+builddir
+*.gresource
+*.ui
+*.mo
+LINGUAS
diff --git a/examples/myapp-gomod/go.mod b/examples/myapp-gomod/go.mod
new file mode 100644
index 0000000000000000000000000000000000000000..1e41112df0f509586ab85483537e89d161113797
--- /dev/null
+++ b/examples/myapp-gomod/go.mod
@@ -0,0 +1,20 @@
+module github.com/jwijenbergh/puregotk/examples/myapp-gomod
+
+go 1.25.0
+
+tool github.com/dennwc/flatpak-go-mod
+
+require (
+	github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+	github.com/jwijenbergh/puregotk/examples/mylib-go-meson v0.0.0-00010101000000-000000000000
+	github.com/pojntfx/go-gettext v0.2.0
+)
+
+require (
+	github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba // indirect
+	github.com/goccy/go-yaml v1.18.0 // indirect
+	github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 // indirect
+	golang.org/x/mod v0.30.0 // indirect
+)
+
+replace github.com/jwijenbergh/puregotk/examples/mylib-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-go-meson
diff --git a/examples/myapp-gomod/go.mod.json b/examples/myapp-gomod/go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..e3e7c9740ccfc7bda6299a6fc4fd872ac6e518db
--- /dev/null
+++ b/examples/myapp-gomod/go.mod.json
@@ -0,0 +1,49 @@
+[
+  {
+    "dest": "vendor",
+    "path": "modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/puregotk",
+    "sha256": "2f386c11285dba4ba7bd57f22ba1ac16e93d0fb5a7cc6c4aaae5f6d957867af4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/puregotk/@v/v0.0.0-20251201161753-28ec1479c381.zip"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-gomod/go.sum b/examples/myapp-gomod/go.sum
new file mode 100644
index 0000000000000000000000000000000000000000..a506d908d78a26c7fb5c6bf4e6be306639b9261a
--- /dev/null
+++ b/examples/myapp-gomod/go.sum
@@ -0,0 +1,12 @@
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba h1:KLfa3f81PhSXNMZs7lJjS/TK1WmMCCjENHr29n+N8BU=
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba/go.mod h1:4akg2uvMr36H/vDzQSPofcff2LBk4u+bTAPy2bxVoOo=
+github.com/goccy/go-yaml v1.18.0 h1:8W7wMFS12Pcas7KU+VVkaiCng+kG8QiFeFwzFb+rwuw=
+github.com/goccy/go-yaml v1.18.0/go.mod h1:XBurs7gK8ATbW4ZPGKgcbrY1Br56PdM69F7LkFRi1kA=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 h1:kQ0LX4ffJvtONhymro3HzrB8XUa6dIGgrbnkl38Rgl0=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42/go.mod h1:amE5lVGstyh2GTEIHFEbgJHmoMD0llIuapnzIlZx7Fc=
+github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381 h1:Cy6in3ph8eGnl0w71S0NnH8ZCj0YhZZHzrwYEgtbtII=
+github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381/go.mod h1:mZu8qSvCSqtVL+xoiebZuicnJijwrLfGRs6/eTVgFlc=
+github.com/pojntfx/go-gettext v0.2.0 h1:Nw3Hyy0Fef3pOuvYYPZESmbOT+IdnYjqx9/ywFo46GU=
+github.com/pojntfx/go-gettext v0.2.0/go.mod h1:eGt2r0JKvlPZjiz+GqEDtg92//F30LEV/IB0h42bk40=
+golang.org/x/mod v0.30.0 h1:fDEXFVZ/fmCKProc/yAXXUijritrDzahmwwefnjoPFk=
+golang.org/x/mod v0.30.0/go.mod h1:lAsf5O2EvJeSFMiBxXDki7sCgAxEUcZHXoXMKT4GJKc=
diff --git a/examples/myapp-gomod/io.github.puregotk.MyAppGomod.json b/examples/myapp-gomod/io.github.puregotk.MyAppGomod.json
new file mode 100644
index 0000000000000000000000000000000000000000..0bb7aea7f0493ac512fb6cd1955bc70baeba16ee
--- /dev/null
+++ b/examples/myapp-gomod/io.github.puregotk.MyAppGomod.json
@@ -0,0 +1,46 @@
+{
+  "id": "io.github.puregotk.MyAppGomod",
+  "runtime": "org.gnome.Platform",
+  "runtime-version": "49",
+  "sdk": "org.gnome.Sdk",
+  "sdk-extensions": ["org.freedesktop.Sdk.Extension.golang"],
+  "command": "myapp-gomod",
+  "build-options": {
+    "append-path": "/usr/lib/sdk/golang/bin",
+    "build-args": ["--filesystem=home"]
+  },
+  "finish-args": [
+    "--socket=wayland",
+    "--socket=fallback-x11",
+    "--share=ipc",
+    "--device=dri"
+  ],
+  "modules": [
+    {
+      "name": "mylib-meson",
+      "buildsystem": "meson",
+      "sources": [
+        { "type": "dir", "path": "../mylib-meson/" },
+        "mylibmeson.go.mod.json"
+      ]
+    },
+    {
+      "name": "myapp-gomod",
+      "buildsystem": "simple",
+      "build-commands": [
+        "mkdir -p vendor && cp modules.txt vendor/modules.txt",
+        ". /usr/lib/sdk/golang/enable.sh && export GOBIN=\"/app/bin\" && go generate ./... && go build -o /app/bin/myapp-gomod -v -mod=vendor -ldflags='-X main.LocaleDir=/app/share/locale' ./src",
+        "mkdir -p /app/share/locale && (cd po && find . -name '*.mo' -exec cp --parents {} /app/share/locale/ \\;)"
+      ],
+      "sources": [
+        { "type": "dir", "path": "." },
+        {
+          "type": "dir",
+          "path": "../mylib-go-meson",
+          "dest": "vendor/github.com/jwijenbergh/puregotk/examples/mylib-go-meson"
+        },
+        "go.mod.json"
+      ]
+    }
+  ]
+}
diff --git a/examples/myapp-gomod/modules.txt b/examples/myapp-gomod/modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..4a8f192b200bd55a0db596478180e28bef024fc0
--- /dev/null
+++ b/examples/myapp-gomod/modules.txt
@@ -0,0 +1,50 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/jwijenbergh/puregotk/examples/mylib-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-go-meson
+## explicit; go 1.24.0
+github.com/jwijenbergh/puregotk/examples/mylib-go-meson/mylibmeson
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-gomod/mylibmeson.go.mod.json b/examples/myapp-gomod/mylibmeson.go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..97e832af96fade4660b3da5abe0170baa59ede39
--- /dev/null
+++ b/examples/myapp-gomod/mylibmeson.go.mod.json
@@ -0,0 +1,50 @@
+[
+  {
+    "dest": "vendor",
+    "dest-filename": "modules.txt",
+    "path": "mylibmeson.modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/puregotk",
+    "sha256": "2f386c11285dba4ba7bd57f22ba1ac16e93d0fb5a7cc6c4aaae5f6d957867af4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/puregotk/@v/v0.0.0-20251201161753-28ec1479c381.zip"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-gomod/mylibmeson.modules.txt b/examples/myapp-gomod/mylibmeson.modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..5a367873230e7edd8bdc3378ad81c68f9cff8b12
--- /dev/null
+++ b/examples/myapp-gomod/mylibmeson.modules.txt
@@ -0,0 +1,47 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-gomod/po/de.po b/examples/myapp-gomod/po/de.po
new file mode 100644
index 0000000000000000000000000000000000000000..81ae464b4fc8f83dfe5a8ed6b3a6b1aa9cb429db
--- /dev/null
+++ b/examples/myapp-gomod/po/de.po
@@ -0,0 +1,25 @@
+msgid ""
+msgstr ""
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-11-29 22:52-0800\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+
+#: ../src/window.go:91
+msgid "Button was clicked!"
+msgstr "Button wurde geklickt!"
+
+#: ../src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Button nach 3 Sekunden wieder aktiviert"
+
+#: ../src/window.blp:5
+msgid "myapp-gomod Main Application Window"
+msgstr "myapp-gomod Hauptanwendungsfenster"
+
+#: ../src/window.blp:11
+msgid "My App Gomod"
+msgstr "My App Gomod"
+
+#: ../src/window.blp:16
+msgid "Open mylib-meson example window"
+msgstr "mylib-meson Beispielfenster öffnen"
diff --git a/examples/myapp-gomod/po/en_GB.po b/examples/myapp-gomod/po/en_GB.po
new file mode 100644
index 0000000000000000000000000000000000000000..17200b042972cfdd65cf00a35edd2f76f1058455
--- /dev/null
+++ b/examples/myapp-gomod/po/en_GB.po
@@ -0,0 +1,25 @@
+msgid ""
+msgstr ""
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-11-29 22:52-0800\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+
+#: ../src/window.go:91
+msgid "Button was clicked!"
+msgstr "Button was clicked!"
+
+#: ../src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Button re-enabled after 3 seconds"
+
+#: ../src/window.blp:5
+msgid "myapp-gomod Main Application Window"
+msgstr "myapp-gomod Main Application Window"
+
+#: ../src/window.blp:11
+msgid "My App Gomod"
+msgstr "My App Gomod"
+
+#: ../src/window.blp:16
+msgid "Open mylib-meson example window"
+msgstr "Open mylib-meson example window"
diff --git a/examples/myapp-gomod/po/en_US.po b/examples/myapp-gomod/po/en_US.po
new file mode 100644
index 0000000000000000000000000000000000000000..17200b042972cfdd65cf00a35edd2f76f1058455
--- /dev/null
+++ b/examples/myapp-gomod/po/en_US.po
@@ -0,0 +1,25 @@
+msgid ""
+msgstr ""
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-11-29 22:52-0800\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+
+#: ../src/window.go:91
+msgid "Button was clicked!"
+msgstr "Button was clicked!"
+
+#: ../src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Button re-enabled after 3 seconds"
+
+#: ../src/window.blp:5
+msgid "myapp-gomod Main Application Window"
+msgstr "myapp-gomod Main Application Window"
+
+#: ../src/window.blp:11
+msgid "My App Gomod"
+msgstr "My App Gomod"
+
+#: ../src/window.blp:16
+msgid "Open mylib-meson example window"
+msgstr "Open mylib-meson example window"
diff --git a/examples/myapp-gomod/po/fr.po b/examples/myapp-gomod/po/fr.po
new file mode 100644
index 0000000000000000000000000000000000000000..17b1b5c921f6b5ae64d68b73fc6df199bcb3de4b
--- /dev/null
+++ b/examples/myapp-gomod/po/fr.po
@@ -0,0 +1,25 @@
+msgid ""
+msgstr ""
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-11-29 22:52-0800\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+
+#: ../src/window.go:91
+msgid "Button was clicked!"
+msgstr "Le bouton a été cliqué !"
+
+#: ../src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Bouton réactivé après 3 secondes"
+
+#: ../src/window.blp:5
+msgid "myapp-gomod Main Application Window"
+msgstr "Fenêtre principale de myapp-gomod"
+
+#: ../src/window.blp:11
+msgid "My App Gomod"
+msgstr "My App Gomod"
+
+#: ../src/window.blp:16
+msgid "Open mylib-meson example window"
+msgstr "Ouvrir la fenêtre d'exemple mylib-meson"
diff --git a/examples/myapp-gomod/po/fr_CA.po b/examples/myapp-gomod/po/fr_CA.po
new file mode 100644
index 0000000000000000000000000000000000000000..17b1b5c921f6b5ae64d68b73fc6df199bcb3de4b
--- /dev/null
+++ b/examples/myapp-gomod/po/fr_CA.po
@@ -0,0 +1,25 @@
+msgid ""
+msgstr ""
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-11-29 22:52-0800\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+
+#: ../src/window.go:91
+msgid "Button was clicked!"
+msgstr "Le bouton a été cliqué !"
+
+#: ../src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Bouton réactivé après 3 secondes"
+
+#: ../src/window.blp:5
+msgid "myapp-gomod Main Application Window"
+msgstr "Fenêtre principale de myapp-gomod"
+
+#: ../src/window.blp:11
+msgid "My App Gomod"
+msgstr "My App Gomod"
+
+#: ../src/window.blp:16
+msgid "Open mylib-meson example window"
+msgstr "Ouvrir la fenêtre d'exemple mylib-meson"
diff --git a/examples/myapp-gomod/po/index.go b/examples/myapp-gomod/po/index.go
new file mode 100644
index 0000000000000000000000000000000000000000..5766d0de67c09444e6da0dc82554dcd52c3ebc1a
--- /dev/null
+++ b/examples/myapp-gomod/po/index.go
@@ -0,0 +1,10 @@
+package po
+
+import "embed"
+
+//go:generate sh -c "find ../src -name '*.go' -o -name '*.blp' | xgettext --language=C++ --keyword=_ --keyword=L --omit-header -o myapp-gomod.pot --files-from=-"
+//go:generate sh -c "find . -name '*.po' -print0 | xargs -0 -I {} msgmerge --update --backup=none \"{}\" myapp-gomod.pot"
+//go:generate sh -c "find . -type f -name '*.po' -print0 | xargs -0 -I {} sh -c 'mkdir -p $(basename {} .po)/LC_MESSAGES && msgfmt -o $(basename {} .po)/LC_MESSAGES/myapp-gomod.mo {}'"
+//go:generate sh -c "find . -name \"*.po\" -exec basename {} .po \\; > LINGUAS"
+//go:embed *
+var FS embed.FS
diff --git a/examples/myapp-gomod/po/myapp-gomod.pot b/examples/myapp-gomod/po/myapp-gomod.pot
new file mode 100644
index 0000000000000000000000000000000000000000..a06eb1f64d11d59f2bca41bdfa51ea38820fda50
--- /dev/null
+++ b/examples/myapp-gomod/po/myapp-gomod.pot
@@ -0,0 +1,19 @@
+#: ../src/window.go:91
+msgid "Button was clicked!"
+msgstr ""
+
+#: ../src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr ""
+
+#: ../src/window.blp:5
+msgid "myapp-gomod Main Application Window"
+msgstr ""
+
+#: ../src/window.blp:11
+msgid "My App Gomod"
+msgstr ""
+
+#: ../src/window.blp:16
+msgid "Open mylib-meson example window"
+msgstr ""
diff --git a/examples/myapp-gomod/src/application.go b/examples/myapp-gomod/src/application.go
new file mode 100644
index 0000000000000000000000000000000000000000..d74f0f0e842033904cf5862fe3db25fc068c5db5
--- /dev/null
+++ b/examples/myapp-gomod/src/application.go
@@ -0,0 +1,94 @@
+package main
+
+import (
+	"runtime"
+	"unsafe"
+
+	"github.com/jwijenbergh/puregotk/v4/adw"
+	"github.com/jwijenbergh/puregotk/v4/gio"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/jwijenbergh/puregotk/v4/gobject"
+	"github.com/jwijenbergh/puregotk/v4/gtk"
+)
+
+var (
+	gTypeApplication gobject.Type
+)
+
+type Application struct {
+	adw.Application
+
+	window *Window
+}
+
+func NewApplication(FirstPropertyNameVar string, varArgs ...interface{}) Application {
+	obj := gobject.NewObject(gTypeApplication, FirstPropertyNameVar, varArgs...)
+
+	var v Application
+	obj.Cast(&v)
+
+	return v
+}
+
+func init() {
+	var appClassInit gobject.ClassInitFunc = func(tc *gobject.TypeClass, u uintptr) {
+		objClass := (*gobject.ObjectClass)(unsafe.Pointer(tc))
+
+		objClass.OverrideConstructed(func(o *gobject.Object) {
+			parentObjClass := (*gobject.ObjectClass)(unsafe.Pointer(tc.PeekParent()))
+
+			parentObjClass.GetConstructed()(o)
+
+			var parent adw.Application
+			o.Cast(&parent)
+
+			app := &Application{
+				Application: parent,
+			}
+
+			var pinner runtime.Pinner
+			pinner.Pin(app)
+
+			var cleanupCallback glib.DestroyNotify = func(data uintptr) {
+				pinner.Unpin()
+			}
+			o.SetDataFull(dataKeyGoInstance, uintptr(unsafe.Pointer(app)), &cleanupCallback)
+		})
+
+		applicationClass := (*gio.ApplicationClass)(unsafe.Pointer(tc))
+
+		applicationClass.OverrideActivate(func(a *gio.Application) {
+			myApp := (*Application)(unsafe.Pointer(a.GetData(dataKeyGoInstance)))
+
+			if myApp.window != nil {
+				myApp.window.ApplicationWindow.Present()
+				return
+			}
+
+			var app gtk.Application
+			a.Cast(&app)
+
+			obj := NewWindow("application", app)
+
+			myApp.window = (*Window)(unsafe.Pointer(obj.GetData(dataKeyGoInstance)))
+
+			myApp.Application.AddWindow(&myApp.window.ApplicationWindow.Window)
+			myApp.window.ApplicationWindow.Present()
+		})
+	}
+
+	var appInstanceInit gobject.InstanceInitFunc = func(ti *gobject.TypeInstance, tc *gobject.TypeClass) {}
+
+	var appParentQuery gobject.TypeQuery
+	gobject.NewTypeQuery(adw.ApplicationGLibType(), &appParentQuery)
+
+	gTypeApplication = gobject.TypeRegisterStaticSimple(
+		appParentQuery.Type,
+		"MyAppGomodApplication",
+		appParentQuery.ClassSize,
+		&appClassInit,
+		appParentQuery.InstanceSize+uint(unsafe.Sizeof(Application{}))+uint(unsafe.Sizeof(&Application{}))+uint(unsafe.Sizeof(&adw.ApplicationWindow{})),
+		&appInstanceInit,
+		0,
+	)
+}
diff --git a/examples/myapp-gomod/src/config.go b/examples/myapp-gomod/src/config.go
new file mode 100644
index 0000000000000000000000000000000000000000..857ddcb2270afb7275de352fd7af5b6b755d7cde
--- /dev/null
+++ b/examples/myapp-gomod/src/config.go
@@ -0,0 +1,10 @@
+package main
+
+const (
+	PackageVersion = "0.1.0"
+	GettextPackage = "myapp-gomod"
+)
+
+var (
+	LocaleDir = "/usr/share/locale"
+)
diff --git a/examples/myapp-gomod/src/constants.go b/examples/myapp-gomod/src/constants.go
new file mode 100644
index 0000000000000000000000000000000000000000..b5b552691fd2c10d815626dccc50b46d3f47b702
--- /dev/null
+++ b/examples/myapp-gomod/src/constants.go
@@ -0,0 +1,5 @@
+package main
+
+const (
+	dataKeyGoInstance = "go_instance"
+)
diff --git a/examples/myapp-gomod/src/main.go b/examples/myapp-gomod/src/main.go
new file mode 100644
index 0000000000000000000000000000000000000000..3048c5cd6ae2701b4f0eb090eb3017c86a9c0896
--- /dev/null
+++ b/examples/myapp-gomod/src/main.go
@@ -0,0 +1,32 @@
+package main
+
+//go:generate sh -c "if [ -z \"$FLATPAK_ID\" ]; then cd .. && GOWORK=off go tool github.com/dennwc/flatpak-go-mod --json . && GOWORK=off go tool github.com/dennwc/flatpak-go-mod --json --module-name mylibmeson ../mylib-meson; fi"
+
+import (
+	"os"
+
+	"github.com/jwijenbergh/puregotk/v4/gio"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/pojntfx/go-gettext/pkg/i18n"
+)
+
+func init() {
+	if err := i18n.InitI18n(GettextPackage, LocaleDir); err != nil {
+		panic(err)
+	}
+
+	resource, err := gio.NewResourceFromData(glib.NewBytes(ResourceContents, uint(len(ResourceContents))))
+	if err != nil {
+		panic(err)
+	}
+	gio.ResourcesRegister(resource)
+}
+
+func main() {
+	app := NewApplication(
+		"application_id", AppID,
+		"flags", gio.GApplicationDefaultFlagsValue,
+	)
+
+	os.Exit(app.Run(len(os.Args), os.Args))
+}
diff --git a/examples/myapp-gomod/src/myapp-gomod.gresource.xml b/examples/myapp-gomod/src/myapp-gomod.gresource.xml
new file mode 100644
index 0000000000000000000000000000000000000000..cae1219fa300d6f5110fa80466da6a14826ef540
--- /dev/null
+++ b/examples/myapp-gomod/src/myapp-gomod.gresource.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<gresources>
+    <gresource prefix="/io/github/puregotk/MyAppGomod">
+        <file preprocess="xml-stripblanks">window.ui</file>
+    </gresource>
+</gresources>
diff --git a/examples/myapp-gomod/src/resources.go b/examples/myapp-gomod/src/resources.go
new file mode 100644
index 0000000000000000000000000000000000000000..612a9d7436c12be6a6516c6c5a793b1b38e99e22
--- /dev/null
+++ b/examples/myapp-gomod/src/resources.go
@@ -0,0 +1,21 @@
+package main
+
+import (
+	_ "embed"
+	"path"
+)
+
+const (
+	AppID      = "io.github.puregotk.MyAppGomod"
+	AppVersion = "0.1.0"
+)
+
+//go:generate sh -c "blueprint-compiler batch-compile . . *.blp && glib-compile-resources *.gresource.xml"
+//go:embed myapp-gomod.gresource
+var ResourceContents []byte
+
+var (
+	AppPath = path.Join("/io", "github", "puregotk", "MyAppGomod")
+
+	ResourceWindowUIPath = path.Join(AppPath, "window.ui")
+)
diff --git a/examples/myapp-gomod/src/window.blp b/examples/myapp-gomod/src/window.blp
new file mode 100644
index 0000000000000000000000000000000000000000..df2d727b4d2ae50b6bdd20faf5fa174b40787756
--- /dev/null
+++ b/examples/myapp-gomod/src/window.blp
@@ -0,0 +1,25 @@
+using Gtk 4.0;
+using Adw 1;
+
+template $MyAppGomodWindow: Adw.ApplicationWindow {
+    title: _("myapp-gomod Main Application Window");
+
+    content: Adw.ToolbarView {
+        [top]
+        Adw.HeaderBar {
+            title-widget: Adw.WindowTitle {
+                title: _("My App Gomod");
+            };
+        }
+
+        content: Button button_test {
+            label: _("Open mylib-meson example window");
+            halign: center;
+            valign: center;
+            margin-top: 12;
+            margin-bottom: 12;
+            margin-start: 12;
+            margin-end: 12;
+        };
+    };
+}
diff --git a/examples/myapp-gomod/src/window.go b/examples/myapp-gomod/src/window.go
new file mode 100644
index 0000000000000000000000000000000000000000..605fcdd11f9ce8a365545f58dc03af6cab9fd49d
--- /dev/null
+++ b/examples/myapp-gomod/src/window.go
@@ -0,0 +1,129 @@
+package main
+
+import (
+	"fmt"
+	"runtime"
+	"time"
+	"unsafe"
+
+	"github.com/jwijenbergh/puregotk/examples/mylib-go-meson/mylibmeson"
+	"github.com/jwijenbergh/puregotk/v4/adw"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/jwijenbergh/puregotk/v4/gobject"
+	"github.com/jwijenbergh/puregotk/v4/gtk"
+	. "github.com/pojntfx/go-gettext/pkg/i18n"
+)
+
+var (
+	gTypeWindow gobject.Type
+)
+
+type Window struct {
+	adw.ApplicationWindow
+
+	buttonTest *gtk.Button
+}
+
+func NewWindow(FirstPropertyNameVar string, varArgs ...interface{}) Window {
+	obj := gobject.NewObject(gTypeWindow, FirstPropertyNameVar, varArgs...)
+
+	var v Window
+	obj.Cast(&v)
+
+	return v
+}
+
+func (w *Window) SetButtonTestSensitive(sensitive bool) {
+	w.buttonTest.SetSensitive(sensitive)
+}
+
+func init() {
+	var windowClassInit gobject.ClassInitFunc = func(tc *gobject.TypeClass, u uintptr) {
+		typeClass := (*gtk.WidgetClass)(unsafe.Pointer(tc))
+		typeClass.SetTemplateFromResource(ResourceWindowUIPath)
+
+		typeClass.BindTemplateChildFull("button_test", false, 0)
+
+		objClass := (*gobject.ObjectClass)(unsafe.Pointer(tc))
+
+		objClass.OverrideConstructed(func(o *gobject.Object) {
+			parentObjClass := (*gobject.ObjectClass)(unsafe.Pointer(tc.PeekParent()))
+			parentObjClass.GetConstructed()(o)
+
+			var parent adw.ApplicationWindow
+			o.Cast(&parent)
+
+			parent.InitTemplate()
+
+			var buttonTest gtk.Button
+			parent.Widget.GetTemplateChild(
+				gTypeWindow,
+				"button_test",
+			).Cast(&buttonTest)
+
+			w := &Window{
+				ApplicationWindow: parent,
+
+				buttonTest: &buttonTest,
+			}
+
+			var pinner runtime.Pinner
+			pinner.Pin(w)
+
+			var cleanupCallback glib.DestroyNotify = func(data uintptr) {
+				pinner.Unpin()
+			}
+			o.SetDataFull(dataKeyGoInstance, uintptr(unsafe.Pointer(w)), &cleanupCallback)
+
+			onButtonTestClicked := func(gtk.Button) {
+				fmt.Println("myapp-gomod test button clicked, opening mylib-meson window")
+
+				obj := gobject.NewObject(mylibmeson.MainApplicationWindowGLibType(),
+					"application", parent.GetApplication(),
+				)
+
+				var libWindow mylibmeson.MainApplicationWindow
+				obj.Cast(&libWindow)
+
+				onLibButtonTestClicked := func(sw mylibmeson.MainApplicationWindow) {
+					fmt.Println("mylib-meson test button clicked")
+
+					libWindow.ShowToast(L("Button was clicked!"))
+					libWindow.SetPropertyTestButtonSensitive(false)
+
+					var timer *time.Timer
+					onDestroy := func(gtk.Widget) {
+						if timer != nil {
+							timer.Stop()
+						}
+					}
+					libWindow.ConnectDestroy(&onDestroy)
+
+					timer = time.AfterFunc(time.Second*3, func() {
+						libWindow.ShowToast(L("Button re-enabled after 3 seconds"))
+						libWindow.SetPropertyTestButtonSensitive(true)
+					})
+				}
+				libWindow.ConnectButtonTestClicked(&onLibButtonTestClicked)
+
+				libWindow.Present()
+			}
+			buttonTest.ConnectClicked(&onButtonTestClicked)
+		})
+	}
+
+	var windowInstanceInit gobject.InstanceInitFunc = func(ti *gobject.TypeInstance, tc *gobject.TypeClass) {}
+
+	var windowParentQuery gobject.TypeQuery
+	gobject.NewTypeQuery(adw.ApplicationWindowGLibType(), &windowParentQuery)
+
+	gTypeWindow = gobject.TypeRegisterStaticSimple(
+		windowParentQuery.Type,
+		"MyAppGomodWindow",
+		windowParentQuery.ClassSize,
+		&windowClassInit,
+		windowParentQuery.InstanceSize+uint(unsafe.Sizeof(Window{}))+uint(unsafe.Sizeof(&Window{}))+uint(unsafe.Sizeof(&gtk.Button{})),
+		&windowInstanceInit,
+		0,
+	)
+}

