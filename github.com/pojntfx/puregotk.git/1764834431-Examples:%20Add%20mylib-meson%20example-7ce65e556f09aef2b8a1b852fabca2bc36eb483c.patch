From 7ce65e556f09aef2b8a1b852fabca2bc36eb483c Mon Sep 17 00:00:00 2001
From: Felicitas Pojtinger <felicitas@pojtinger.com>
Date: Wed, 03 Dec 2025 23:47:11 -0800
Subject: [PATCH] Examples: Add mylib-meson example

Signed-off-by: Felicitas Pojtinger <felicitas@pojtinger.com>
---
diff --git a/examples/mylib-meson/.gitignore b/examples/mylib-meson/.gitignore
new file mode 100644
index 0000000000000000000000000000000000000000..91fbf563186e05dee9bb850fd652a36133315a65
--- /dev/null
+++ b/examples/mylib-meson/.gitignore
@@ -0,0 +1,7 @@
+_build
+repo
+builddir
+*.gresource
+*.ui
+*.mo
+LINGUAS
\ No newline at end of file
diff --git a/examples/mylib-meson/example.js b/examples/mylib-meson/example.js
new file mode 100755
index 0000000000000000000000000000000000000000..15aaf5364e5cfef3328bf142a22315f00ff714fd
--- /dev/null
+++ b/examples/mylib-meson/example.js
@@ -0,0 +1,45 @@
+#!/usr/bin/env -S gjs -m
+
+import Adw from "gi://Adw?version=1";
+import GObject from "gi://GObject";
+import Gio from "gi://Gio";
+import MyLibMeson from "gi://MyLibMeson?version=0.1";
+import system from "system";
+
+const ExampleApplication = GObject.registerClass(
+  {
+    GTypeName: "ExampleApplication",
+  },
+  class ExampleApplication extends Adw.Application {
+    constructor() {
+      super({
+        application_id: "io.github.puregotk.MyLibMesonExample",
+        flags: Gio.ApplicationFlags.DEFAULT_FLAGS,
+      });
+    }
+
+    #window = null;
+
+    vfunc_activate() {
+      this.#window = new MyLibMeson.MainApplicationWindow({
+        application: this,
+      });
+
+      this.#window.connect("button-test-clicked", () => {
+        console.log("Test button clicked");
+
+        this.#window.show_toast("Button was clicked!");
+        this.#window.test_button_sensitive = false;
+
+        setTimeout(() => {
+          this.#window.show_toast("Button re-enabled after 3 seconds");
+          this.#window.test_button_sensitive = true;
+        }, 3000);
+      });
+
+      this.#window.present();
+    }
+  }
+);
+
+new ExampleApplication().run([system.programInvocationName, ...ARGV]);
diff --git a/examples/mylib-meson/go.mod b/examples/mylib-meson/go.mod
new file mode 100644
index 0000000000000000000000000000000000000000..8e9daaa761a26d4fc94c4694fb5f64c571161059
--- /dev/null
+++ b/examples/mylib-meson/go.mod
@@ -0,0 +1,17 @@
+module io.github.puregotk/mylib-meson
+
+go 1.25.0
+
+tool github.com/dennwc/flatpak-go-mod
+
+require (
+	github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+	github.com/pojntfx/go-gettext v0.2.0
+)
+
+require (
+	github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba // indirect
+	github.com/goccy/go-yaml v1.18.0 // indirect
+	github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 // indirect
+	golang.org/x/mod v0.30.0 // indirect
+)
diff --git a/examples/mylib-meson/go.mod.json b/examples/mylib-meson/go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..e3e7c9740ccfc7bda6299a6fc4fd872ac6e518db
--- /dev/null
+++ b/examples/mylib-meson/go.mod.json
@@ -0,0 +1,49 @@
+[
+  {
+    "dest": "vendor",
+    "path": "modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/puregotk",
+    "sha256": "2f386c11285dba4ba7bd57f22ba1ac16e93d0fb5a7cc6c4aaae5f6d957867af4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/puregotk/@v/v0.0.0-20251201161753-28ec1479c381.zip"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/mylib-meson/go.sum b/examples/mylib-meson/go.sum
new file mode 100644
index 0000000000000000000000000000000000000000..a506d908d78a26c7fb5c6bf4e6be306639b9261a
--- /dev/null
+++ b/examples/mylib-meson/go.sum
@@ -0,0 +1,12 @@
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba h1:KLfa3f81PhSXNMZs7lJjS/TK1WmMCCjENHr29n+N8BU=
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba/go.mod h1:4akg2uvMr36H/vDzQSPofcff2LBk4u+bTAPy2bxVoOo=
+github.com/goccy/go-yaml v1.18.0 h1:8W7wMFS12Pcas7KU+VVkaiCng+kG8QiFeFwzFb+rwuw=
+github.com/goccy/go-yaml v1.18.0/go.mod h1:XBurs7gK8ATbW4ZPGKgcbrY1Br56PdM69F7LkFRi1kA=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 h1:kQ0LX4ffJvtONhymro3HzrB8XUa6dIGgrbnkl38Rgl0=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42/go.mod h1:amE5lVGstyh2GTEIHFEbgJHmoMD0llIuapnzIlZx7Fc=
+github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381 h1:Cy6in3ph8eGnl0w71S0NnH8ZCj0YhZZHzrwYEgtbtII=
+github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381/go.mod h1:mZu8qSvCSqtVL+xoiebZuicnJijwrLfGRs6/eTVgFlc=
+github.com/pojntfx/go-gettext v0.2.0 h1:Nw3Hyy0Fef3pOuvYYPZESmbOT+IdnYjqx9/ywFo46GU=
+github.com/pojntfx/go-gettext v0.2.0/go.mod h1:eGt2r0JKvlPZjiz+GqEDtg92//F30LEV/IB0h42bk40=
+golang.org/x/mod v0.30.0 h1:fDEXFVZ/fmCKProc/yAXXUijritrDzahmwwefnjoPFk=
+golang.org/x/mod v0.30.0/go.mod h1:lAsf5O2EvJeSFMiBxXDki7sCgAxEUcZHXoXMKT4GJKc=
diff --git a/examples/mylib-meson/io.github.puregotk.MyLibMesonExample.json b/examples/mylib-meson/io.github.puregotk.MyLibMesonExample.json
new file mode 100644
index 0000000000000000000000000000000000000000..6ef1411355bf5d7ab91ff1ba6ad5bd4a7fd53ea9
--- /dev/null
+++ b/examples/mylib-meson/io.github.puregotk.MyLibMesonExample.json
@@ -0,0 +1,31 @@
+{
+  "id": "io.github.puregotk.MyLibMesonExample",
+  "runtime": "org.gnome.Platform",
+  "runtime-version": "49",
+  "sdk": "org.gnome.Sdk",
+  "sdk-extensions": ["org.freedesktop.Sdk.Extension.golang"],
+  "command": "example.js",
+  "build-options": {
+    "append-path": "/usr/lib/sdk/golang/bin",
+    "build-args": ["--filesystem=home"]
+  },
+  "finish-args": [
+    "--socket=wayland",
+    "--socket=fallback-x11",
+    "--share=ipc",
+    "--device=dri"
+  ],
+  "modules": [
+    {
+      "name": "mylib-meson",
+      "buildsystem": "meson",
+      "sources": [{ "type": "dir", "path": "." }, "go.mod.json"]
+    },
+    {
+      "name": "mylib-meson-example",
+      "buildsystem": "simple",
+      "build-commands": ["install -Dm755 example.js /app/bin/example.js"],
+      "sources": [{ "type": "file", "path": "example.js" }]
+    }
+  ]
+}
diff --git a/examples/mylib-meson/meson.build b/examples/mylib-meson/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..4fe909e5df145673656413cf0f2f3211e36bdd79
--- /dev/null
+++ b/examples/mylib-meson/meson.build
@@ -0,0 +1,13 @@
+project(
+    'mylib-meson',
+    'c',
+    version: '0.1.0',
+    meson_version: '>= 1.0.0',
+    default_options: [],
+)
+add_project_arguments(['-I' + meson.project_build_root()], language: 'c')
+
+i18n = import('i18n')
+
+subdir('src')
+subdir('po')
diff --git a/examples/mylib-meson/modules.txt b/examples/mylib-meson/modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..5a367873230e7edd8bdc3378ad81c68f9cff8b12
--- /dev/null
+++ b/examples/mylib-meson/modules.txt
@@ -0,0 +1,47 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/mylib-meson/po/POTFILES.in b/examples/mylib-meson/po/POTFILES.in
new file mode 100644
index 0000000000000000000000000000000000000000..791dac694055fd9e9baf7cddffa2172e9bfa0a91
--- /dev/null
+++ b/examples/mylib-meson/po/POTFILES.in
@@ -0,0 +1,6 @@
+# List of source files containing translatable strings.
+# Please keep this file sorted alphabetically.
+src/constants.go
+src/mylib-meson.go
+src/window.blp
+src/window.go
diff --git a/examples/mylib-meson/po/de.po b/examples/mylib-meson/po/de.po
new file mode 100644
index 0000000000000000000000000000000000000000..1870c1df415e6a4abc7882a2f9c343363a31e2fa
--- /dev/null
+++ b/examples/mylib-meson/po/de.po
@@ -0,0 +1,30 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the mylib-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: mylib-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:20-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:7
+msgid "mylib-meson Main Application Window"
+msgstr "mylib-meson Hauptanwendungsfenster"
+
+#: src/window.blp:14
+msgid "My Lib Meson"
+msgstr "My Lib Meson"
+
+#: src/window.blp:19
+msgid "Click me"
+msgstr "Klicke mich"
diff --git a/examples/mylib-meson/po/en_GB.po b/examples/mylib-meson/po/en_GB.po
new file mode 100644
index 0000000000000000000000000000000000000000..46b68cc5cdee58591c5ac5d771000c8f72a33fef
--- /dev/null
+++ b/examples/mylib-meson/po/en_GB.po
@@ -0,0 +1,30 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the mylib-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: mylib-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:20-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:7
+msgid "mylib-meson Main Application Window"
+msgstr "mylib-meson Main Application Window"
+
+#: src/window.blp:14
+msgid "My Lib Meson"
+msgstr "My Lib Meson"
+
+#: src/window.blp:19
+msgid "Click me"
+msgstr "Click me"
diff --git a/examples/mylib-meson/po/en_US.po b/examples/mylib-meson/po/en_US.po
new file mode 100644
index 0000000000000000000000000000000000000000..46b68cc5cdee58591c5ac5d771000c8f72a33fef
--- /dev/null
+++ b/examples/mylib-meson/po/en_US.po
@@ -0,0 +1,30 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the mylib-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: mylib-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:20-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:7
+msgid "mylib-meson Main Application Window"
+msgstr "mylib-meson Main Application Window"
+
+#: src/window.blp:14
+msgid "My Lib Meson"
+msgstr "My Lib Meson"
+
+#: src/window.blp:19
+msgid "Click me"
+msgstr "Click me"
diff --git a/examples/mylib-meson/po/fr.po b/examples/mylib-meson/po/fr.po
new file mode 100644
index 0000000000000000000000000000000000000000..33410b3e21281e5b35af8cf29b5d68334625d3e8
--- /dev/null
+++ b/examples/mylib-meson/po/fr.po
@@ -0,0 +1,30 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the mylib-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: mylib-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:20-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:7
+msgid "mylib-meson Main Application Window"
+msgstr "Fenêtre principale de l'application senbara-gtk-gtk"
+
+#: src/window.blp:14
+msgid "My Lib Meson"
+msgstr "My Lib Meson"
+
+#: src/window.blp:19
+msgid "Click me"
+msgstr "Cliquez-moi"
diff --git a/examples/mylib-meson/po/fr_CA.po b/examples/mylib-meson/po/fr_CA.po
new file mode 100644
index 0000000000000000000000000000000000000000..33410b3e21281e5b35af8cf29b5d68334625d3e8
--- /dev/null
+++ b/examples/mylib-meson/po/fr_CA.po
@@ -0,0 +1,30 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the mylib-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: mylib-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:20-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:7
+msgid "mylib-meson Main Application Window"
+msgstr "Fenêtre principale de l'application senbara-gtk-gtk"
+
+#: src/window.blp:14
+msgid "My Lib Meson"
+msgstr "My Lib Meson"
+
+#: src/window.blp:19
+msgid "Click me"
+msgstr "Cliquez-moi"
diff --git a/examples/mylib-meson/po/meson.build b/examples/mylib-meson/po/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..ea64ac78e7fe63e6bad4e77df0317c5ddcf823e4
--- /dev/null
+++ b/examples/mylib-meson/po/meson.build
@@ -0,0 +1,12 @@
+i18n.gettext(
+    'mylib-meson',
+    preset: 'glib',
+    args: [
+        '--keyword=L',
+        '--keyword=LD:2',
+        '--keyword=i18n.Local',
+        '--keyword=Local',
+        '--keyword=i18n.LocalDomain:2',
+        '--keyword=LocalDomain:2',
+    ],
+)
diff --git a/examples/mylib-meson/po/mylib-meson.pot b/examples/mylib-meson/po/mylib-meson.pot
new file mode 100644
index 0000000000000000000000000000000000000000..a72ddc00b2b9d96e07106c8d157b34091445ea64
--- /dev/null
+++ b/examples/mylib-meson/po/mylib-meson.pot
@@ -0,0 +1,30 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the mylib-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: mylib-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:20-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:7
+msgid "mylib-meson Main Application Window"
+msgstr ""
+
+#: src/window.blp:14
+msgid "My Lib Meson"
+msgstr ""
+
+#: src/window.blp:19
+msgid "Click me"
+msgstr ""
diff --git a/examples/mylib-meson/src/config.go b/examples/mylib-meson/src/config.go
new file mode 100644
index 0000000000000000000000000000000000000000..6a7a161083488be4b8cf4bdcb44a85dc624e0f94
--- /dev/null
+++ b/examples/mylib-meson/src/config.go
@@ -0,0 +1,7 @@
+package main
+
+const (
+	PackageVersion = "0.1.0"
+	GettextPackage = "mylib-meson"
+	LocaleDir      = "/usr/share/locale"
+)
diff --git a/examples/mylib-meson/src/config.go.in b/examples/mylib-meson/src/config.go.in
new file mode 100644
index 0000000000000000000000000000000000000000..a2ef8b283cc9a49cdd29b1bfb763e7b18459108e
--- /dev/null
+++ b/examples/mylib-meson/src/config.go.in
@@ -0,0 +1,7 @@
+package main
+
+const (
+	PackageVersion = @PACKAGE_VERSION@
+	GettextPackage = @GETTEXT_PACKAGE@
+	LocaleDir      = @LOCALEDIR@
+)
diff --git a/examples/mylib-meson/src/constants.go b/examples/mylib-meson/src/constants.go
new file mode 100644
index 0000000000000000000000000000000000000000..08023e542b793d5e30a828db66cd94dda2497750
--- /dev/null
+++ b/examples/mylib-meson/src/constants.go
@@ -0,0 +1,22 @@
+package main
+
+import (
+	_ "embed"
+
+	"path"
+)
+
+const (
+	dataKeyGoInstance = "go_instance"
+
+	propertyIdTestButtonSensitive = 1
+)
+
+var (
+	appPath = path.Join("/io", "github", "puregotk", "MyLibMeson")
+
+	resourceWindowUIPath = path.Join(appPath, "window.ui")
+)
+
+//go:embed mylib-meson.gresource
+var ResourceContents []byte
diff --git a/examples/mylib-meson/src/docs.toml.in b/examples/mylib-meson/src/docs.toml.in
new file mode 100644
index 0000000000000000000000000000000000000000..5a35b57fa2c880034d853ae72f119064f2ef734c
--- /dev/null
+++ b/examples/mylib-meson/src/docs.toml.in
@@ -0,0 +1,28 @@
+[library]
+    version = @PACKAGE_VERSION@
+    authors = "puregotk"
+    license = "AGPL-3.0"
+    website_url = "https://github.com/nicholasrobinson/puregotk"
+    browse_url = "https://github.com/nicholasrobinson/puregotk"
+    repository_url = "https://github.com/nicholasrobinson/puregotk.git"
+    description = "Example GTK library built with Go"
+    devhelp = true
+    search_index = true
+    dependencies = ["Gtk-4.0", "Adw-1"]
+
+[dependencies."Gtk—4.0"]
+    name = "Gtk"
+    description = "The GTK toolkit"
+    docs_url = "https://docs.gtk.org/gtk4/"
+
+[dependencies."Adw-1"]
+    name = "Adw"
+    description = "Building blocks for modern GNOME applications"
+    docs_url = "https://gnome.pages.gitlab.gnome.org/libadwaita/doc/1.7/"
+
+[theme]
+    show_index_summary = true
+    show_class_hierarchy = true
+
+[source-location]
+    base_url = "https://github.com/nicholasrobinson/puregotk/blob/main/examples/mylib-meson"
diff --git a/examples/mylib-meson/src/meson.build b/examples/mylib-meson/src/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..36c94dc011fb60c32f46f325f78fabc836988091
--- /dev/null
+++ b/examples/mylib-meson/src/meson.build
@@ -0,0 +1,178 @@
+api_version = '0.1'
+
+pkg = import('pkgconfig')
+gnome = import('gnome')
+fs = import('fs')
+
+config_go = configuration_data()
+config_go.set_quoted('PACKAGE_VERSION', meson.project_version())
+config_go.set_quoted('GETTEXT_PACKAGE', 'mylib-meson')
+config_go.set_quoted('LOCALEDIR', get_option('prefix') / get_option('localedir'))
+
+config_go_file = custom_target(
+    'config-go',
+    input: configure_file(
+        input: meson.current_source_dir() / 'config.go.in',
+        output: 'config_rendered.go',
+        configuration: config_go,
+    ),
+    output: 'config.go',
+    command: ['cp', '@INPUT@', meson.current_source_dir() / 'config.go'],
+)
+
+mylib_meson_source_dir = meson.current_source_dir()
+
+mylib_meson_source_go_files = files('mylib-meson.go')
+
+mylib_meson_headers = ['mylib-meson.h', 'window.h']
+
+version_split = meson.project_version().split('.')
+version_conf = configuration_data()
+version_conf.set('VERSION', meson.project_version())
+version_conf.set('MAJOR_VERSION', version_split[0])
+version_conf.set('MINOR_VERSION', version_split[1])
+version_conf.set('MICRO_VERSION', version_split[2])
+
+configure_file(
+    input: 'mylib-meson-version.h.in',
+    output: 'mylib-meson-version.h',
+    configuration: version_conf,
+    install: true,
+    install_dir: get_option('includedir') / 'mylib-meson',
+)
+
+mylib_meson_deps = [
+    dependency('gtk4'),
+    dependency('libadwaita-1', version: '>= 1.4'),
+]
+
+mylib_meson_blueprints = custom_target(
+    'mylib-meson-blueprints',
+    input: files('window.blp'),
+    output: '.',
+    command: [
+        find_program('blueprint-compiler'),
+        'batch-compile',
+        '@CURRENT_SOURCE_DIR@',
+        '@CURRENT_SOURCE_DIR@',
+        '@INPUT@',
+    ],
+)
+
+mylib_meson_resources = custom_target(
+    'mylib-meson-resources',
+    input: gnome.compile_resources(
+        'mylib-meson',
+        'mylib-meson.gresource.xml',
+        gresource_bundle: true,
+        dependencies: [mylib_meson_blueprints],
+    ),
+    output: 'mylib-meson-resources.gresource',
+    command: [
+        'cp',
+        '@INPUT@',
+        meson.current_source_dir() / 'mylib-meson.gresource',
+    ],
+)
+
+mylib_meson_lib_overwrite = custom_target(
+    'mylib-meson-lib-overwrite',
+    build_always_stale: true,  # Go caches internally
+    input: mylib_meson_source_go_files,
+    output: 'libmylib-meson-overwrite-' + api_version + '.so',
+    command: [
+        find_program('go').full_path(),
+        'build',
+        '-buildmode',
+        'c-shared',
+        '-x',
+        '-o',
+        '@OUTPUT@',
+        mylib_meson_source_dir,
+    ],
+    depends: [mylib_meson_resources, config_go_file],
+)
+
+mylib_meson_archive = custom_target(
+    'mylib-meson-archive',
+    build_always_stale: true,  # Go caches internally
+    input: mylib_meson_source_go_files,
+    output: 'libmylib-meson-' + api_version + '.a',
+    command: [
+        find_program('go').full_path(),
+        'build',
+        '-buildmode',
+        'c-archive',
+        '-x',
+        '-o',
+        '@OUTPUT@',
+        mylib_meson_source_dir,
+    ],
+    depends: [mylib_meson_resources, config_go_file, mylib_meson_lib_overwrite],
+)
+
+mylib_meson_lib = shared_library(
+    'mylib-meson-' + api_version,
+    [],
+    link_whole: [mylib_meson_archive],
+    dependencies: mylib_meson_deps,
+    install: true,
+)
+
+# We overwrite the manually linked mylib_meson_lib with mylib_meson_lib_overwrite here since the manually linked library built with `c-archive` can not be used by another Go program without a `morestack` crash
+meson.add_install_script(
+    'install',
+    mylib_meson_lib_overwrite,
+    get_option('prefix') / get_option('libdir') / fs.name(
+        mylib_meson_lib.full_path(),
+    ),
+)
+
+install_headers(mylib_meson_headers, subdir: 'mylib-meson')
+
+pkg.generate(
+    description: 'Example GTK library built with Go',
+    libraries: mylib_meson_lib,
+    name: 'mylib-meson',
+    filebase: 'mylib-meson-' + api_version,
+    version: meson.project_version(),
+    subdirs: 'mylib-meson',
+    requires: ['gtk4 >= 4.17.5', 'libadwaita-1 >= 1.7.5'],
+    install_dir: get_option('libdir') / 'pkgconfig',
+)
+
+mylib_meson_gir = gnome.generate_gir(
+    mylib_meson_lib,
+    sources: [mylib_meson_headers],
+    header: 'mylib-meson.h',
+    export_packages: 'mylib-meson-' + api_version,
+    nsversion: api_version,
+    namespace: 'MyLibMeson',
+    symbol_prefix: 'mylib_meson',
+    identifier_prefix: 'MyLibMeson',
+    includes: ['Gtk-4.0', 'Adw-1'],
+    install: true,
+)
+
+custom_target(
+    'mylib-meson-docs',
+    input: [
+        configure_file(
+            input: meson.current_source_dir() / 'docs.toml.in',
+            output: 'docs.toml',
+            configuration: config_go,
+        ),
+        mylib_meson_gir,
+    ],
+    output: 'mylib-meson-' + api_version,
+    command: [
+        find_program('gi-docgen'),
+        'generate',
+        '--no-namespace-dir',
+        '--config=@INPUT0@',
+        '--output-dir=@OUTPUT@',
+        '@INPUT1@',
+    ],
+    install: true,
+    install_dir: get_option('datadir') / 'doc',
+)
diff --git a/examples/mylib-meson/src/mylib-meson-version.h.in b/examples/mylib-meson/src/mylib-meson-version.h.in
new file mode 100644
index 0000000000000000000000000000000000000000..f4f23e259f1144bb6c87c19adef9a30b3ad8fa23
--- /dev/null
+++ b/examples/mylib-meson/src/mylib-meson-version.h.in
@@ -0,0 +1,76 @@
+#pragma once
+
+#if !defined(MYLIB_MESON_INSIDE) && !defined(MYLIB_MESON_COMPILATION)
+# error "Only <mylib-meson.h> can be included directly."
+#endif
+
+/**
+ * SECTION:mylib-mesonversion
+ * @short_description: mylib-meson version checking
+ *
+ * mylib-meson provides macros to check the version of the library
+ * at compile-time
+ */
+
+/**
+ * MYLIB_MESON_MAJOR_VERSION:
+ *
+ * mylib-meson major version component (e.g. 1 if %MYLIB_MESON_VERSION is 1.2.3)
+ */
+#define MYLIB_MESON_MAJOR_VERSION (@MAJOR_VERSION@)
+
+/**
+ * MYLIB_MESON_MINOR_VERSION:
+ *
+ * mylib-meson minor version component (e.g. 2 if %MYLIB_MESON_VERSION is 1.2.3)
+ */
+#define MYLIB_MESON_MINOR_VERSION (@MINOR_VERSION@)
+
+/**
+ * MYLIB_MESON_MICRO_VERSION:
+ *
+ * mylib-meson micro version component (e.g. 3 if %MYLIB_MESON_VERSION is 1.2.3)
+ */
+#define MYLIB_MESON_MICRO_VERSION (@MICRO_VERSION@)
+
+/**
+ * MYLIB_MESON_VERSION
+ *
+ * mylib-meson version.
+ */
+#define MYLIB_MESON_VERSION (@VERSION@)
+
+/**
+ * MYLIB_MESON_VERSION_S:
+ *
+ * mylib-meson version, encoded as a string, useful for printing and
+ * concatenation.
+ */
+#define MYLIB_MESON_VERSION_S "@VERSION@"
+
+#define MYLIB_MESON_ENCODE_VERSION(major,minor,micro) \
+        ((major) << 24 | (minor) << 16 | (micro) << 8)
+
+/**
+ * MYLIB_MESON_VERSION_HEX:
+ *
+ * mylib-meson version, encoded as an hexadecimal number, useful for
+ * integer comparisons.
+ */
+#define MYLIB_MESON_VERSION_HEX \
+        (MYLIB_MESON_ENCODE_VERSION (MYLIB_MESON_MAJOR_VERSION, MYLIB_MESON_MINOR_VERSION, MYLIB_MESON_MICRO_VERSION))
+
+/**
+ * MYLIB_MESON_CHECK_VERSION:
+ * @major: required major version
+ * @minor: required minor version
+ * @micro: required micro version
+ *
+ * Compile-time version checking. Evaluates to %TRUE if the version
+ * of mylib-meson is greater than the required one.
+ */
+#define MYLIB_MESON_CHECK_VERSION(major,minor,micro)   \
+        (MYLIB_MESON_MAJOR_VERSION > (major) || \
+         (MYLIB_MESON_MAJOR_VERSION == (major) && MYLIB_MESON_MINOR_VERSION > (minor)) || \
+         (MYLIB_MESON_MAJOR_VERSION == (major) && MYLIB_MESON_MINOR_VERSION == (minor) && \
+          MYLIB_MESON_MICRO_VERSION >= (micro)))
diff --git a/examples/mylib-meson/src/mylib-meson.go b/examples/mylib-meson/src/mylib-meson.go
new file mode 100644
index 0000000000000000000000000000000000000000..aa3018c50259d85bf1a5f6b0c2bbabc6187712b8
--- /dev/null
+++ b/examples/mylib-meson/src/mylib-meson.go
@@ -0,0 +1,25 @@
+package main
+
+//go:generate sh -c "if [ -z \"$FLATPAK_ID\" ]; then cd .. && GOWORK=off go tool github.com/dennwc/flatpak-go-mod --json .; fi"
+
+import (
+	_ "embed"
+
+	"github.com/jwijenbergh/puregotk/v4/gio"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/pojntfx/go-gettext/pkg/i18n"
+)
+
+func init() {
+	if err := i18n.BindI18n(GettextPackage, LocaleDir); err != nil {
+		panic(err)
+	}
+
+	resource, err := gio.NewResourceFromData(glib.NewBytes(ResourceContents, uint(len(ResourceContents))))
+	if err != nil {
+		panic(err)
+	}
+	gio.ResourcesRegister(resource)
+}
+
+func main() {}
diff --git a/examples/mylib-meson/src/mylib-meson.gresource.xml b/examples/mylib-meson/src/mylib-meson.gresource.xml
new file mode 100644
index 0000000000000000000000000000000000000000..860a2da0fd36d1fb0ee45977a6506950fd2dc770
--- /dev/null
+++ b/examples/mylib-meson/src/mylib-meson.gresource.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<gresources>
+    <gresource prefix="/io/github/puregotk/MyLibMeson">
+        <file preprocess="xml-stripblanks">window.ui</file>
+    </gresource>
+</gresources>
diff --git a/examples/mylib-meson/src/mylib-meson.h b/examples/mylib-meson/src/mylib-meson.h
new file mode 100644
index 0000000000000000000000000000000000000000..bc304dc2beb31d38d5e1c8bbf39dfbec3bcdd35c
--- /dev/null
+++ b/examples/mylib-meson/src/mylib-meson.h
@@ -0,0 +1,14 @@
+#pragma once
+
+#include <glib.h>
+
+G_BEGIN_DECLS
+
+#define MYLIB_MESON_INSIDE
+
+#include "mylib-meson-version.h"
+#include "window.h"
+
+#undef MYLIB_MESON_INSIDE
+
+G_END_DECLS
diff --git a/examples/mylib-meson/src/window.blp b/examples/mylib-meson/src/window.blp
new file mode 100644
index 0000000000000000000000000000000000000000..aa60533b71692c5f5037dcebd68558aabd1f3cd5
--- /dev/null
+++ b/examples/mylib-meson/src/window.blp
@@ -0,0 +1,29 @@
+using Gtk 4.0;
+using Adw 1;
+
+translation-domain "mylib-meson";
+
+template $MyLibMesonMainApplicationWindow: Adw.ApplicationWindow {
+    title: _("mylib-meson Main Application Window");
+
+    content: Adw.ToastOverlay toast_overlay {
+        child: Adw.ToolbarView {
+            [top]
+            Adw.HeaderBar {
+                title-widget: Adw.WindowTitle {
+                    title: _("My Lib Meson");
+                };
+            }
+
+            content: Button button_test {
+                label: _("Click me");
+                halign: center;
+                valign: center;
+                margin-top: 12;
+                margin-bottom: 12;
+                margin-start: 12;
+                margin-end: 12;
+            };
+        };
+    };
+}
diff --git a/examples/mylib-meson/src/window.go b/examples/mylib-meson/src/window.go
new file mode 100644
index 0000000000000000000000000000000000000000..c23733d3b3ad23ad7f61100e822d973f13f154ad
--- /dev/null
+++ b/examples/mylib-meson/src/window.go
@@ -0,0 +1,156 @@
+package main
+
+import (
+	"runtime"
+	"unsafe"
+
+	"github.com/jwijenbergh/puregotk/v4/adw"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/jwijenbergh/puregotk/v4/gobject"
+	"github.com/jwijenbergh/puregotk/v4/gobject/types"
+	"github.com/jwijenbergh/puregotk/v4/gtk"
+)
+
+import "C"
+
+var (
+	gTypeMyLibMesonMainApplicationWindow gobject.Type
+)
+
+//export mylib_meson_main_application_window_get_type
+func mylib_meson_main_application_window_get_type() C.ulong {
+	return C.ulong(gTypeMyLibMesonMainApplicationWindow)
+}
+
+type myLibMesonMainApplicationWindow struct {
+	adw.ApplicationWindow
+
+	buttonTest   *gtk.Button
+	toastOverlay *adw.ToastOverlay
+}
+
+func init() {
+	var classInit gobject.ClassInitFunc = func(tc *gobject.TypeClass, u uintptr) {
+		typeClass := (*gtk.WidgetClass)(unsafe.Pointer(tc))
+		typeClass.SetTemplateFromResource(resourceWindowUIPath)
+
+		typeClass.BindTemplateChildFull("button_test", false, 0)
+		typeClass.BindTemplateChildFull("toast_overlay", false, 0)
+
+		gobject.SignalNewv(
+			"button-test-clicked",
+			gTypeMyLibMesonMainApplicationWindow,
+			gobject.GSignalRunFirstValue,
+			nil,
+			nil,
+			0,
+			nil,
+			types.GType(gobject.TypeNoneVal),
+			0,
+			nil,
+		)
+
+		objClass := (*gobject.ObjectClass)(unsafe.Pointer(tc))
+
+		objClass.OverrideConstructed(func(o *gobject.Object) {
+			parentObjClass := (*gobject.ObjectClass)(unsafe.Pointer(tc.PeekParent()))
+
+			parentObjClass.GetConstructed()(o)
+
+			var parent adw.ApplicationWindow
+			o.Cast(&parent)
+
+			parent.InitTemplate()
+
+			var buttonTest gtk.Button
+			parent.Widget.GetTemplateChild(
+				gTypeMyLibMesonMainApplicationWindow,
+				"button_test",
+			).Cast(&buttonTest)
+
+			var toastOverlay adw.ToastOverlay
+			parent.Widget.GetTemplateChild(
+				gTypeMyLibMesonMainApplicationWindow,
+				"toast_overlay",
+			).Cast(&toastOverlay)
+
+			w := &myLibMesonMainApplicationWindow{
+				ApplicationWindow: parent,
+				buttonTest:        &buttonTest,
+				toastOverlay:      &toastOverlay,
+			}
+
+			var pinner runtime.Pinner
+			pinner.Pin(w)
+
+			var cleanupCallback glib.DestroyNotify = func(data uintptr) {
+				pinner.Unpin()
+			}
+			o.SetDataFull(dataKeyGoInstance, uintptr(unsafe.Pointer(w)), &cleanupCallback)
+
+			onButtonTestClicked := func(gtk.Button) {
+				gobject.SignalEmit(
+					o,
+					gobject.SignalLookup("button-test-clicked", gTypeMyLibMesonMainApplicationWindow),
+					0,
+				)
+			}
+
+			buttonTest.ConnectClicked(&onButtonTestClicked)
+		})
+
+		objClass.OverrideSetProperty(func(o *gobject.Object, u uint, v *gobject.Value, ps *gobject.ParamSpec) {
+			switch u {
+			case propertyIdTestButtonSensitive:
+				w := (*myLibMesonMainApplicationWindow)(unsafe.Pointer(o.GetData(dataKeyGoInstance)))
+
+				w.buttonTest.SetSensitive(v.GetBoolean())
+			}
+		})
+
+		objClass.OverrideGetProperty(func(o *gobject.Object, u uint, v *gobject.Value, ps *gobject.ParamSpec) {
+			switch u {
+			case propertyIdTestButtonSensitive:
+				w := (*myLibMesonMainApplicationWindow)(unsafe.Pointer(o.GetData(dataKeyGoInstance)))
+
+				v.SetBoolean(w.buttonTest.IsSensitive())
+			}
+		})
+
+		pspec := gobject.NewParamSpecBoolean(
+			"test-button-sensitive",
+			"Test Button Sensitive",
+			"Whether the test button is sensitive",
+			true,
+			gobject.GParamReadwriteValue,
+		)
+
+		objClass.InstallProperty(propertyIdTestButtonSensitive, pspec)
+	}
+
+	var instanceInit gobject.InstanceInitFunc = func(ti *gobject.TypeInstance, tc *gobject.TypeClass) {}
+
+	var parentQuery gobject.TypeQuery
+	gobject.NewTypeQuery(adw.ApplicationWindowGLibType(), &parentQuery)
+
+	gTypeMyLibMesonMainApplicationWindow = gobject.TypeRegisterStaticSimple(
+		parentQuery.Type,
+		"MyLibMesonMainApplicationWindow",
+		parentQuery.ClassSize,
+		&classInit,
+		parentQuery.InstanceSize+uint(unsafe.Sizeof(myLibMesonMainApplicationWindow{}))+uint(unsafe.Sizeof(&myLibMesonMainApplicationWindow{})),
+		&instanceInit,
+		0,
+	)
+}
+
+func (w *myLibMesonMainApplicationWindow) showToast(message string) {
+	w.toastOverlay.AddToast(adw.NewToast(message))
+}
+
+//export mylib_meson_main_application_window_show_toast
+func mylib_meson_main_application_window_show_toast(window unsafe.Pointer, message *C.char) {
+	w := (*myLibMesonMainApplicationWindow)(unsafe.Pointer(gobject.ObjectNewFromInternalPtr(uintptr(window)).GetData(dataKeyGoInstance)))
+
+	w.showToast(C.GoString(message))
+}
diff --git a/examples/mylib-meson/src/window.h b/examples/mylib-meson/src/window.h
new file mode 100644
index 0000000000000000000000000000000000000000..8f258399a46755a253b2da8eb0e9d06bf368e1ed
--- /dev/null
+++ b/examples/mylib-meson/src/window.h
@@ -0,0 +1,40 @@
+#pragma once
+
+#include <adwaita.h>
+
+G_BEGIN_DECLS
+
+#define MYLIB_MESON_INSIDE
+
+/**
+ * MyLibMesonMainApplicationWindow:
+ *
+ * Example application window with a test button and toast notifications.
+ */
+#define MYLIB_MESON_MAIN_APPLICATION_WINDOW                                    \
+  (mylib_meson_main_application_window_get_type())
+
+typedef struct _MyLibMesonMainApplicationWindow MyLibMesonMainApplicationWindow;
+
+/**
+ * mylib_meson_main_application_window_get_type:
+ *
+ * Gets the GType for MyLibMesonMainApplicationWindow.
+ *
+ * Returns: the GType for MyLibMesonMainApplicationWindow
+ */
+GType mylib_meson_main_application_window_get_type(void);
+
+/**
+ * mylib_meson_main_application_window_show_toast:
+ * @window: a MyLibMesonMainApplicationWindow
+ * @message: the message to display in the toast
+ *
+ * Shows a toast notification with the given message inside the window.
+ */
+void mylib_meson_main_application_window_show_toast(
+    MyLibMesonMainApplicationWindow *window, const char *message);
+
+#undef MYLIB_MESON_INSIDE
+
+G_END_DECLS

