From c69aab0645ba15c47c8bb2888256e0576f840b0d Mon Sep 17 00:00:00 2001
From: Felicitas Pojtinger <felicitas@pojtinger.com>
Date: Thu, 04 Dec 2025 00:11:21 -0800
Subject: [PATCH] Examples: Add Meson-based application example that uses the custom library

Signed-off-by: Felicitas Pojtinger <felicitas@pojtinger.com>
---
diff --git a/examples/myapp-meson/.gitignore b/examples/myapp-meson/.gitignore
new file mode 100644
index 0000000000000000000000000000000000000000..52b618aac0d36ad52373b2483edaf785e35b58b1
--- /dev/null
+++ b/examples/myapp-meson/.gitignore
@@ -0,0 +1,7 @@
+_build
+repo
+builddir
+*.gresource
+*.ui
+*.mo
+LINGUAS
diff --git a/examples/myapp-meson/go.mod b/examples/myapp-meson/go.mod
new file mode 100644
index 0000000000000000000000000000000000000000..dcff63933e76e6c21effc35b4e5ae8ae711dc0ce
--- /dev/null
+++ b/examples/myapp-meson/go.mod
@@ -0,0 +1,20 @@
+module github.com/jwijenbergh/puregotk/examples/myapp-meson
+
+go 1.25.0
+
+tool github.com/dennwc/flatpak-go-mod
+
+require (
+	github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+	github.com/jwijenbergh/puregotk/examples/mylib-go-meson v0.0.0-00010101000000-000000000000
+	github.com/pojntfx/go-gettext v0.2.0
+)
+
+require (
+	github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba // indirect
+	github.com/goccy/go-yaml v1.18.0 // indirect
+	github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 // indirect
+	golang.org/x/mod v0.30.0 // indirect
+)
+
+replace github.com/jwijenbergh/puregotk/examples/mylib-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-go-meson
diff --git a/examples/myapp-meson/go.mod.json b/examples/myapp-meson/go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..e3e7c9740ccfc7bda6299a6fc4fd872ac6e518db
--- /dev/null
+++ b/examples/myapp-meson/go.mod.json
@@ -0,0 +1,49 @@
+[
+  {
+    "dest": "vendor",
+    "path": "modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/puregotk",
+    "sha256": "2f386c11285dba4ba7bd57f22ba1ac16e93d0fb5a7cc6c4aaae5f6d957867af4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/puregotk/@v/v0.0.0-20251201161753-28ec1479c381.zip"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-meson/go.sum b/examples/myapp-meson/go.sum
new file mode 100644
index 0000000000000000000000000000000000000000..a506d908d78a26c7fb5c6bf4e6be306639b9261a
--- /dev/null
+++ b/examples/myapp-meson/go.sum
@@ -0,0 +1,12 @@
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba h1:KLfa3f81PhSXNMZs7lJjS/TK1WmMCCjENHr29n+N8BU=
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba/go.mod h1:4akg2uvMr36H/vDzQSPofcff2LBk4u+bTAPy2bxVoOo=
+github.com/goccy/go-yaml v1.18.0 h1:8W7wMFS12Pcas7KU+VVkaiCng+kG8QiFeFwzFb+rwuw=
+github.com/goccy/go-yaml v1.18.0/go.mod h1:XBurs7gK8ATbW4ZPGKgcbrY1Br56PdM69F7LkFRi1kA=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 h1:kQ0LX4ffJvtONhymro3HzrB8XUa6dIGgrbnkl38Rgl0=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42/go.mod h1:amE5lVGstyh2GTEIHFEbgJHmoMD0llIuapnzIlZx7Fc=
+github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381 h1:Cy6in3ph8eGnl0w71S0NnH8ZCj0YhZZHzrwYEgtbtII=
+github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381/go.mod h1:mZu8qSvCSqtVL+xoiebZuicnJijwrLfGRs6/eTVgFlc=
+github.com/pojntfx/go-gettext v0.2.0 h1:Nw3Hyy0Fef3pOuvYYPZESmbOT+IdnYjqx9/ywFo46GU=
+github.com/pojntfx/go-gettext v0.2.0/go.mod h1:eGt2r0JKvlPZjiz+GqEDtg92//F30LEV/IB0h42bk40=
+golang.org/x/mod v0.30.0 h1:fDEXFVZ/fmCKProc/yAXXUijritrDzahmwwefnjoPFk=
+golang.org/x/mod v0.30.0/go.mod h1:lAsf5O2EvJeSFMiBxXDki7sCgAxEUcZHXoXMKT4GJKc=
diff --git a/examples/myapp-meson/io.github.puregotk.MyAppMeson.json b/examples/myapp-meson/io.github.puregotk.MyAppMeson.json
new file mode 100644
index 0000000000000000000000000000000000000000..4c1740788666fa5320bf2baffb434bfeb62bb9c2
--- /dev/null
+++ b/examples/myapp-meson/io.github.puregotk.MyAppMeson.json
@@ -0,0 +1,41 @@
+{
+  "id": "io.github.puregotk.MyAppMeson",
+  "runtime": "org.gnome.Platform",
+  "runtime-version": "49",
+  "sdk": "org.gnome.Sdk",
+  "sdk-extensions": ["org.freedesktop.Sdk.Extension.golang"],
+  "command": "myapp-meson",
+  "build-options": {
+    "append-path": "/usr/lib/sdk/golang/bin",
+    "build-args": ["--filesystem=home"]
+  },
+  "finish-args": [
+    "--socket=wayland",
+    "--socket=fallback-x11",
+    "--share=ipc",
+    "--device=dri"
+  ],
+  "modules": [
+    {
+      "name": "mylib-meson",
+      "buildsystem": "meson",
+      "sources": [
+        { "type": "dir", "path": "../mylib-meson/" },
+        "mylibmeson.go.mod.json"
+      ]
+    },
+    {
+      "name": "myapp-meson",
+      "buildsystem": "meson",
+      "sources": [
+        { "type": "dir", "path": "." },
+        {
+          "type": "dir",
+          "path": "../mylib-go-meson",
+          "dest": "vendor/github.com/jwijenbergh/puregotk/examples/mylib-go-meson"
+        },
+        "go.mod.json"
+      ]
+    }
+  ]
+}
diff --git a/examples/myapp-meson/meson.build b/examples/myapp-meson/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..0888c0e0ec27fbc55fd208a00ef8473a4e23a2b7
--- /dev/null
+++ b/examples/myapp-meson/meson.build
@@ -0,0 +1,14 @@
+project(
+    'myapp-meson',
+    'c',
+    version: '0.1.0',
+    meson_version: '>= 1.0.0',
+    default_options: [],
+)
+add_project_arguments(['-I' + meson.project_build_root()], language: 'c')
+
+i18n = import('i18n')
+gnome = import('gnome')
+
+subdir('src')
+subdir('po')
diff --git a/examples/myapp-meson/modules.txt b/examples/myapp-meson/modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..4a8f192b200bd55a0db596478180e28bef024fc0
--- /dev/null
+++ b/examples/myapp-meson/modules.txt
@@ -0,0 +1,50 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/jwijenbergh/puregotk/examples/mylib-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-go-meson
+## explicit; go 1.24.0
+github.com/jwijenbergh/puregotk/examples/mylib-go-meson/mylibmeson
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-meson/mylibmeson.go.mod.json b/examples/myapp-meson/mylibmeson.go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..97e832af96fade4660b3da5abe0170baa59ede39
--- /dev/null
+++ b/examples/myapp-meson/mylibmeson.go.mod.json
@@ -0,0 +1,50 @@
+[
+  {
+    "dest": "vendor",
+    "dest-filename": "modules.txt",
+    "path": "mylibmeson.modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/puregotk",
+    "sha256": "2f386c11285dba4ba7bd57f22ba1ac16e93d0fb5a7cc6c4aaae5f6d957867af4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/puregotk/@v/v0.0.0-20251201161753-28ec1479c381.zip"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-meson/mylibmeson.modules.txt b/examples/myapp-meson/mylibmeson.modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..5a367873230e7edd8bdc3378ad81c68f9cff8b12
--- /dev/null
+++ b/examples/myapp-meson/mylibmeson.modules.txt
@@ -0,0 +1,47 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-20251201161753-28ec1479c381
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-meson/po/POTFILES.in b/examples/myapp-meson/po/POTFILES.in
new file mode 100644
index 0000000000000000000000000000000000000000..78c025f8b6742242ca4392396c42f90d3f70e561
--- /dev/null
+++ b/examples/myapp-meson/po/POTFILES.in
@@ -0,0 +1,7 @@
+# List of source files containing translatable strings.
+# Please keep this file sorted alphabetically.
+src/constants.go
+src/main.go
+src/window.blp
+src/window.go
+src/window.ui
diff --git a/examples/myapp-meson/po/de.po b/examples/myapp-meson/po/de.po
new file mode 100644
index 0000000000000000000000000000000000000000..4763218b3d67fd17542f80d448aff591e6703565
--- /dev/null
+++ b/examples/myapp-meson/po/de.po
@@ -0,0 +1,36 @@
+# German translations for myapp-meson package.
+# Copyright (C) 2025 THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the myapp-meson package.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: myapp-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:42-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:5 src/window.ui:10
+msgid "myapp-meson Main Application Window"
+msgstr "myapp-meson Hauptanwendungsfenster"
+
+#: src/window.blp:11 src/window.ui:17
+msgid "My App Meson"
+msgstr "My App Meson"
+
+#: src/window.blp:16 src/window.ui:24
+msgid "Open mylib-meson example window"
+msgstr "mylib-meson Beispielfenster öffnen"
+
+#: src/window.go:91
+msgid "Button was clicked!"
+msgstr "Button wurde geklickt!"
+
+#: src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Button nach 3 Sekunden wieder aktiviert"
diff --git a/examples/myapp-meson/po/en_GB.po b/examples/myapp-meson/po/en_GB.po
new file mode 100644
index 0000000000000000000000000000000000000000..6b74f38cde4bf78a89f0c5c1571443af1cc2fb30
--- /dev/null
+++ b/examples/myapp-meson/po/en_GB.po
@@ -0,0 +1,36 @@
+# British English translations for myapp-meson package.
+# Copyright (C) 2025 THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the myapp-meson package.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: myapp-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:42-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:5 src/window.ui:10
+msgid "myapp-meson Main Application Window"
+msgstr "myapp-meson Main Application Window"
+
+#: src/window.blp:11 src/window.ui:17
+msgid "My App Meson"
+msgstr "My App Meson"
+
+#: src/window.blp:16 src/window.ui:24
+msgid "Open mylib-meson example window"
+msgstr "Open mylib-meson example window"
+
+#: src/window.go:91
+msgid "Button was clicked!"
+msgstr "Button was clicked!"
+
+#: src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Button re-enabled after 3 seconds"
diff --git a/examples/myapp-meson/po/en_US.po b/examples/myapp-meson/po/en_US.po
new file mode 100644
index 0000000000000000000000000000000000000000..43a5b9f8217ebdcb99e0635b9eec11119f9704fa
--- /dev/null
+++ b/examples/myapp-meson/po/en_US.po
@@ -0,0 +1,36 @@
+# American English translations for myapp-meson package.
+# Copyright (C) 2025 THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the myapp-meson package.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: myapp-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:42-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:5 src/window.ui:10
+msgid "myapp-meson Main Application Window"
+msgstr "myapp-meson Main Application Window"
+
+#: src/window.blp:11 src/window.ui:17
+msgid "My App Meson"
+msgstr "My App Meson"
+
+#: src/window.blp:16 src/window.ui:24
+msgid "Open mylib-meson example window"
+msgstr "Open mylib-meson example window"
+
+#: src/window.go:91
+msgid "Button was clicked!"
+msgstr "Button was clicked!"
+
+#: src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Button re-enabled after 3 seconds"
diff --git a/examples/myapp-meson/po/fr.po b/examples/myapp-meson/po/fr.po
new file mode 100644
index 0000000000000000000000000000000000000000..039e9136534b7a7a12bed7cf6d664c290ba55b2f
--- /dev/null
+++ b/examples/myapp-meson/po/fr.po
@@ -0,0 +1,36 @@
+# French translations for myapp-meson package.
+# Copyright (C) 2025 THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the myapp-meson package.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: myapp-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:42-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:5 src/window.ui:10
+msgid "myapp-meson Main Application Window"
+msgstr "Fenêtre principale de myapp-meson"
+
+#: src/window.blp:11 src/window.ui:17
+msgid "My App Meson"
+msgstr "My App Meson"
+
+#: src/window.blp:16 src/window.ui:24
+msgid "Open mylib-meson example window"
+msgstr "Ouvrir la fenêtre d'exemple mylib-meson"
+
+#: src/window.go:91
+msgid "Button was clicked!"
+msgstr "Le bouton a été cliqué !"
+
+#: src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Bouton réactivé après 3 secondes"
diff --git a/examples/myapp-meson/po/fr_CA.po b/examples/myapp-meson/po/fr_CA.po
new file mode 100644
index 0000000000000000000000000000000000000000..9e4531dba618fef985ce57c627a10e5ef6cbd809
--- /dev/null
+++ b/examples/myapp-meson/po/fr_CA.po
@@ -0,0 +1,36 @@
+# Canadian French translations for myapp-meson package.
+# Copyright (C) 2025 THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the myapp-meson package.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: myapp-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:42-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:5 src/window.ui:10
+msgid "myapp-meson Main Application Window"
+msgstr "Fenêtre principale de myapp-meson"
+
+#: src/window.blp:11 src/window.ui:17
+msgid "My App Meson"
+msgstr "My App Meson"
+
+#: src/window.blp:16 src/window.ui:24
+msgid "Open mylib-meson example window"
+msgstr "Ouvrir la fenêtre d'exemple mylib-meson"
+
+#: src/window.go:91
+msgid "Button was clicked!"
+msgstr "Le bouton a été cliqué !"
+
+#: src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr "Bouton réactivé après 3 secondes"
diff --git a/examples/myapp-meson/po/meson.build b/examples/myapp-meson/po/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..c4b4c4bdabaad7ae7b0c45ebded17a3e8c926da9
--- /dev/null
+++ b/examples/myapp-meson/po/meson.build
@@ -0,0 +1,12 @@
+i18n.gettext(
+    'myapp-meson',
+    preset: 'glib',
+    args: [
+        '--keyword=L',
+        '--keyword=LD:2',
+        '--keyword=i18n.Local',
+        '--keyword=Local',
+        '--keyword=i18n.LocalDomain:2',
+        '--keyword=LocalDomain:2',
+    ],
+)
diff --git a/examples/myapp-meson/po/myapp-meson.pot b/examples/myapp-meson/po/myapp-meson.pot
new file mode 100644
index 0000000000000000000000000000000000000000..19c76c35fbe6f2d07e2860da3b70ed0a7d66f4a6
--- /dev/null
+++ b/examples/myapp-meson/po/myapp-meson.pot
@@ -0,0 +1,38 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the myapp-meson package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: myapp-meson\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2025-12-03 23:42-0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/window.blp:5 src/window.ui:10
+msgid "myapp-meson Main Application Window"
+msgstr ""
+
+#: src/window.blp:11 src/window.ui:17
+msgid "My App Meson"
+msgstr ""
+
+#: src/window.blp:16 src/window.ui:24
+msgid "Open mylib-meson example window"
+msgstr ""
+
+#: src/window.go:91
+msgid "Button was clicked!"
+msgstr ""
+
+#: src/window.go:103
+msgid "Button re-enabled after 3 seconds"
+msgstr ""
diff --git a/examples/myapp-meson/src/application.go b/examples/myapp-meson/src/application.go
new file mode 100644
index 0000000000000000000000000000000000000000..f66a5db491ca5e48a60b30de6ce9038f8a9075f0
--- /dev/null
+++ b/examples/myapp-meson/src/application.go
@@ -0,0 +1,94 @@
+package main
+
+import (
+	"runtime"
+	"unsafe"
+
+	"github.com/jwijenbergh/puregotk/v4/adw"
+	"github.com/jwijenbergh/puregotk/v4/gio"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/jwijenbergh/puregotk/v4/gobject"
+	"github.com/jwijenbergh/puregotk/v4/gtk"
+)
+
+var (
+	gTypeApplication gobject.Type
+)
+
+type Application struct {
+	adw.Application
+
+	window *Window
+}
+
+func NewApplication(FirstPropertyNameVar string, varArgs ...interface{}) Application {
+	obj := gobject.NewObject(gTypeApplication, FirstPropertyNameVar, varArgs...)
+
+	var v Application
+	obj.Cast(&v)
+
+	return v
+}
+
+func init() {
+	var appClassInit gobject.ClassInitFunc = func(tc *gobject.TypeClass, u uintptr) {
+		objClass := (*gobject.ObjectClass)(unsafe.Pointer(tc))
+
+		objClass.OverrideConstructed(func(o *gobject.Object) {
+			parentObjClass := (*gobject.ObjectClass)(unsafe.Pointer(tc.PeekParent()))
+
+			parentObjClass.GetConstructed()(o)
+
+			var parent adw.Application
+			o.Cast(&parent)
+
+			app := &Application{
+				Application: parent,
+			}
+
+			var pinner runtime.Pinner
+			pinner.Pin(app)
+
+			var cleanupCallback glib.DestroyNotify = func(data uintptr) {
+				pinner.Unpin()
+			}
+			o.SetDataFull(dataKeyGoInstance, uintptr(unsafe.Pointer(app)), &cleanupCallback)
+		})
+
+		applicationClass := (*gio.ApplicationClass)(unsafe.Pointer(tc))
+
+		applicationClass.OverrideActivate(func(a *gio.Application) {
+			myApp := (*Application)(unsafe.Pointer(a.GetData(dataKeyGoInstance)))
+
+			if myApp.window != nil {
+				myApp.window.ApplicationWindow.Present()
+				return
+			}
+
+			var app gtk.Application
+			a.Cast(&app)
+
+			obj := NewWindow("application", app)
+
+			myApp.window = (*Window)(unsafe.Pointer(obj.GetData(dataKeyGoInstance)))
+
+			myApp.Application.AddWindow(&myApp.window.ApplicationWindow.Window)
+			myApp.window.ApplicationWindow.Present()
+		})
+	}
+
+	var appInstanceInit gobject.InstanceInitFunc = func(ti *gobject.TypeInstance, tc *gobject.TypeClass) {}
+
+	var appParentQuery gobject.TypeQuery
+	gobject.NewTypeQuery(adw.ApplicationGLibType(), &appParentQuery)
+
+	gTypeApplication = gobject.TypeRegisterStaticSimple(
+		appParentQuery.Type,
+		"MyAppMesonApplication",
+		appParentQuery.ClassSize,
+		&appClassInit,
+		appParentQuery.InstanceSize+uint(unsafe.Sizeof(Application{}))+uint(unsafe.Sizeof(&Application{}))+uint(unsafe.Sizeof(&adw.ApplicationWindow{})),
+		&appInstanceInit,
+		0,
+	)
+}
diff --git a/examples/myapp-meson/src/config.go b/examples/myapp-meson/src/config.go
new file mode 100644
index 0000000000000000000000000000000000000000..8eaf12f6ff874f601dc1d7742835785ef8c97c62
--- /dev/null
+++ b/examples/myapp-meson/src/config.go
@@ -0,0 +1,7 @@
+package main
+
+const (
+	PackageVersion = "0.1.0"
+	GettextPackage = "myapp-meson"
+	LocaleDir      = "/usr/share/locale"
+)
diff --git a/examples/myapp-meson/src/config.go.in b/examples/myapp-meson/src/config.go.in
new file mode 100644
index 0000000000000000000000000000000000000000..a2ef8b283cc9a49cdd29b1bfb763e7b18459108e
--- /dev/null
+++ b/examples/myapp-meson/src/config.go.in
@@ -0,0 +1,7 @@
+package main
+
+const (
+	PackageVersion = @PACKAGE_VERSION@
+	GettextPackage = @GETTEXT_PACKAGE@
+	LocaleDir      = @LOCALEDIR@
+)
diff --git a/examples/myapp-meson/src/constants.go b/examples/myapp-meson/src/constants.go
new file mode 100644
index 0000000000000000000000000000000000000000..b5b552691fd2c10d815626dccc50b46d3f47b702
--- /dev/null
+++ b/examples/myapp-meson/src/constants.go
@@ -0,0 +1,5 @@
+package main
+
+const (
+	dataKeyGoInstance = "go_instance"
+)
diff --git a/examples/myapp-meson/src/main.go b/examples/myapp-meson/src/main.go
new file mode 100644
index 0000000000000000000000000000000000000000..3048c5cd6ae2701b4f0eb090eb3017c86a9c0896
--- /dev/null
+++ b/examples/myapp-meson/src/main.go
@@ -0,0 +1,32 @@
+package main
+
+//go:generate sh -c "if [ -z \"$FLATPAK_ID\" ]; then cd .. && GOWORK=off go tool github.com/dennwc/flatpak-go-mod --json . && GOWORK=off go tool github.com/dennwc/flatpak-go-mod --json --module-name mylibmeson ../mylib-meson; fi"
+
+import (
+	"os"
+
+	"github.com/jwijenbergh/puregotk/v4/gio"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/pojntfx/go-gettext/pkg/i18n"
+)
+
+func init() {
+	if err := i18n.InitI18n(GettextPackage, LocaleDir); err != nil {
+		panic(err)
+	}
+
+	resource, err := gio.NewResourceFromData(glib.NewBytes(ResourceContents, uint(len(ResourceContents))))
+	if err != nil {
+		panic(err)
+	}
+	gio.ResourcesRegister(resource)
+}
+
+func main() {
+	app := NewApplication(
+		"application_id", AppID,
+		"flags", gio.GApplicationDefaultFlagsValue,
+	)
+
+	os.Exit(app.Run(len(os.Args), os.Args))
+}
diff --git a/examples/myapp-meson/src/meson.build b/examples/myapp-meson/src/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..109308f81c8822acfaa9690218ef33a68c89694d
--- /dev/null
+++ b/examples/myapp-meson/src/meson.build
@@ -0,0 +1,72 @@
+config_go = configuration_data()
+config_go.set_quoted('PACKAGE_VERSION', meson.project_version())
+config_go.set_quoted('GETTEXT_PACKAGE', 'myapp-meson')
+config_go.set_quoted('LOCALEDIR', get_option('prefix') / get_option('localedir'))
+
+config_go_file = custom_target(
+    'config-go',
+    input: configure_file(
+        input: meson.current_source_dir() / 'config.go.in',
+        output: 'config_rendered.go',
+        configuration: config_go,
+    ),
+    output: 'config.go',
+    command: ['cp', '@INPUT@', meson.current_source_dir() / 'config.go'],
+)
+
+myapp_meson_source_dir = meson.current_source_dir()
+
+myapp_meson_source_go_files = files('main.go')
+
+myapp_meson_deps = [
+    dependency('gtk4'),
+    dependency('libadwaita-1', version: '>= 1.4'),
+    dependency('mylib-meson-0.1', version: '>= 0.1.0'),
+]
+
+myapp_meson_blueprints = custom_target(
+    'myapp-meson-blueprints',
+    input: files('window.blp'),
+    output: '.',
+    command: [
+        find_program('blueprint-compiler'),
+        'batch-compile',
+        '@CURRENT_SOURCE_DIR@',
+        '@CURRENT_SOURCE_DIR@',
+        '@INPUT@',
+    ],
+)
+
+myapp_meson_resources = custom_target(
+    'myapp-meson-resources',
+    input: gnome.compile_resources(
+        'myapp-meson',
+        'myapp-meson.gresource.xml',
+        gresource_bundle: true,
+        dependencies: [myapp_meson_blueprints],
+    ),
+    output: 'myapp-meson-resources.gresource',
+    command: [
+        'cp',
+        '@INPUT@',
+        meson.current_source_dir() / 'myapp-meson.gresource',
+    ],
+)
+
+custom_target(
+    'myapp-meson',
+    build_always_stale: true,  # Go caches internally
+    input: myapp_meson_source_go_files,
+    output: 'myapp-meson',
+    command: [
+        find_program('go').full_path(),
+        'build',
+        '-x',
+        '-o',
+        '@OUTPUT@',
+        myapp_meson_source_dir,
+    ],
+    depends: [myapp_meson_resources, config_go_file],
+    install: true,
+    install_dir: get_option('prefix') / get_option('bindir'),
+)
diff --git a/examples/myapp-meson/src/myapp-meson.gresource.xml b/examples/myapp-meson/src/myapp-meson.gresource.xml
new file mode 100644
index 0000000000000000000000000000000000000000..f91a0c0bbb41f25a2f779efa7b46221eff5276dd
--- /dev/null
+++ b/examples/myapp-meson/src/myapp-meson.gresource.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<gresources>
+    <gresource prefix="/io/github/puregotk/MyAppMeson">
+        <file preprocess="xml-stripblanks">window.ui</file>
+    </gresource>
+</gresources>
diff --git a/examples/myapp-meson/src/resources.go b/examples/myapp-meson/src/resources.go
new file mode 100644
index 0000000000000000000000000000000000000000..2390da2ebe8af8abfc0d13e1178adae483b4cb43
--- /dev/null
+++ b/examples/myapp-meson/src/resources.go
@@ -0,0 +1,20 @@
+package main
+
+import (
+	_ "embed"
+	"path"
+)
+
+const (
+	AppID      = "io.github.puregotk.MyAppMeson"
+	AppVersion = "0.1.0"
+)
+
+//go:embed myapp-meson.gresource
+var ResourceContents []byte
+
+var (
+	AppPath = path.Join("/io", "github", "puregotk", "MyAppMeson")
+
+	ResourceWindowUIPath = path.Join(AppPath, "window.ui")
+)
diff --git a/examples/myapp-meson/src/window.blp b/examples/myapp-meson/src/window.blp
new file mode 100644
index 0000000000000000000000000000000000000000..a1f17fd1bda1526e1fb49bdff1646d271fb2bff3
--- /dev/null
+++ b/examples/myapp-meson/src/window.blp
@@ -0,0 +1,25 @@
+using Gtk 4.0;
+using Adw 1;
+
+template $MyAppMesonWindow: Adw.ApplicationWindow {
+    title: _("myapp-meson Main Application Window");
+
+    content: Adw.ToolbarView {
+        [top]
+        Adw.HeaderBar {
+            title-widget: Adw.WindowTitle {
+                title: _("My App Meson");
+            };
+        }
+
+        content: Button button_test {
+            label: _("Open mylib-meson example window");
+            halign: center;
+            valign: center;
+            margin-top: 12;
+            margin-bottom: 12;
+            margin-start: 12;
+            margin-end: 12;
+        };
+    };
+}
diff --git a/examples/myapp-meson/src/window.go b/examples/myapp-meson/src/window.go
new file mode 100644
index 0000000000000000000000000000000000000000..3b7458a9b4e537eccc5daae16e3c850e78d5da15
--- /dev/null
+++ b/examples/myapp-meson/src/window.go
@@ -0,0 +1,129 @@
+package main
+
+import (
+	"fmt"
+	"runtime"
+	"time"
+	"unsafe"
+
+	"github.com/jwijenbergh/puregotk/examples/mylib-go-meson/mylibmeson"
+	"github.com/jwijenbergh/puregotk/v4/adw"
+	"github.com/jwijenbergh/puregotk/v4/glib"
+	"github.com/jwijenbergh/puregotk/v4/gobject"
+	"github.com/jwijenbergh/puregotk/v4/gtk"
+	. "github.com/pojntfx/go-gettext/pkg/i18n"
+)
+
+var (
+	gTypeWindow gobject.Type
+)
+
+type Window struct {
+	adw.ApplicationWindow
+
+	buttonTest *gtk.Button
+}
+
+func NewWindow(FirstPropertyNameVar string, varArgs ...interface{}) Window {
+	obj := gobject.NewObject(gTypeWindow, FirstPropertyNameVar, varArgs...)
+
+	var v Window
+	obj.Cast(&v)
+
+	return v
+}
+
+func (w *Window) SetButtonTestSensitive(sensitive bool) {
+	w.buttonTest.SetSensitive(sensitive)
+}
+
+func init() {
+	var windowClassInit gobject.ClassInitFunc = func(tc *gobject.TypeClass, u uintptr) {
+		typeClass := (*gtk.WidgetClass)(unsafe.Pointer(tc))
+		typeClass.SetTemplateFromResource(ResourceWindowUIPath)
+
+		typeClass.BindTemplateChildFull("button_test", false, 0)
+
+		objClass := (*gobject.ObjectClass)(unsafe.Pointer(tc))
+
+		objClass.OverrideConstructed(func(o *gobject.Object) {
+			parentObjClass := (*gobject.ObjectClass)(unsafe.Pointer(tc.PeekParent()))
+			parentObjClass.GetConstructed()(o)
+
+			var parent adw.ApplicationWindow
+			o.Cast(&parent)
+
+			parent.InitTemplate()
+
+			var buttonTest gtk.Button
+			parent.Widget.GetTemplateChild(
+				gTypeWindow,
+				"button_test",
+			).Cast(&buttonTest)
+
+			w := &Window{
+				ApplicationWindow: parent,
+
+				buttonTest: &buttonTest,
+			}
+
+			var pinner runtime.Pinner
+			pinner.Pin(w)
+
+			var cleanupCallback glib.DestroyNotify = func(data uintptr) {
+				pinner.Unpin()
+			}
+			o.SetDataFull(dataKeyGoInstance, uintptr(unsafe.Pointer(w)), &cleanupCallback)
+
+			onButtonTestClicked := func(gtk.Button) {
+				fmt.Println("myapp-meson test button clicked, opening mylib-meson window")
+
+				obj := gobject.NewObject(mylibmeson.MainApplicationWindowGLibType(),
+					"application", parent.GetApplication(),
+				)
+
+				var libWindow mylibmeson.MainApplicationWindow
+				obj.Cast(&libWindow)
+
+				onLibButtonTestClicked := func(sw mylibmeson.MainApplicationWindow) {
+					fmt.Println("mylib-meson test button clicked")
+
+					libWindow.ShowToast(L("Button was clicked!"))
+					libWindow.SetPropertyTestButtonSensitive(false)
+
+					var timer *time.Timer
+					onDestroy := func(gtk.Widget) {
+						if timer != nil {
+							timer.Stop()
+						}
+					}
+					libWindow.ConnectDestroy(&onDestroy)
+
+					timer = time.AfterFunc(time.Second*3, func() {
+						libWindow.ShowToast(L("Button re-enabled after 3 seconds"))
+						libWindow.SetPropertyTestButtonSensitive(true)
+					})
+				}
+				libWindow.ConnectButtonTestClicked(&onLibButtonTestClicked)
+
+				libWindow.Present()
+			}
+			buttonTest.ConnectClicked(&onButtonTestClicked)
+		})
+	}
+
+	var windowInstanceInit gobject.InstanceInitFunc = func(ti *gobject.TypeInstance, tc *gobject.TypeClass) {}
+
+	var windowParentQuery gobject.TypeQuery
+	gobject.NewTypeQuery(adw.ApplicationWindowGLibType(), &windowParentQuery)
+
+	gTypeWindow = gobject.TypeRegisterStaticSimple(
+		windowParentQuery.Type,
+		"MyAppMesonWindow",
+		windowParentQuery.ClassSize,
+		&windowClassInit,
+		windowParentQuery.InstanceSize+uint(unsafe.Sizeof(Window{}))+uint(unsafe.Sizeof(&Window{}))+uint(unsafe.Sizeof(&gtk.Button{})),
+		&windowInstanceInit,
+		0,
+	)
+}

