From e47ea8c90736f890b6520a6178ab895edb9f37d1 Mon Sep 17 00:00:00 2001
From: Felicitas Pojtinger <felicitas@pojtinger.com>
Date: Mon, 08 Dec 2025 21:57:06 -0800
Subject: [PATCH] Examples: Directly reference `puregotk` from the Flatpak manifests to allow testing out changes directly from Flatpak
---
diff --git a/examples/myapp-gnome-gomod/go.mod b/examples/myapp-gnome-gomod/go.mod
new file mode 100644
index 0000000000000000000000000000000000000000..8f49f1a70087e97b3768f55501ca227d178319b7
--- /dev/null
+++ b/examples/myapp-gnome-gomod/go.mod
@@ -0,0 +1,23 @@
+module github.com/jwijenbergh/puregotk/examples/myapp-gnome-gomod
+
+go 1.25.0
+
+tool github.com/dennwc/flatpak-go-mod
+
+require (
+	github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000
+	github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson v0.0.0-00010101000000-000000000000
+	github.com/pojntfx/go-gettext v0.2.0
+)
+
+require (
+	github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba // indirect
+	github.com/goccy/go-yaml v1.18.0 // indirect
+	github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 // indirect
+	golang.org/x/mod v0.30.0 // indirect
+)
+
+replace (
+	github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+	github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-gtk-go-meson
+)
diff --git a/examples/myapp-gnome-gomod/go.mod.json b/examples/myapp-gnome-gomod/go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..ef6bcba42f5b273dea111518764719a9617ef80f
--- /dev/null
+++ b/examples/myapp-gnome-gomod/go.mod.json
@@ -0,0 +1,42 @@
+[
+  {
+    "dest": "vendor",
+    "path": "modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-gnome-gomod/go.sum b/examples/myapp-gnome-gomod/go.sum
new file mode 100644
index 0000000000000000000000000000000000000000..b5efb4cd10b1b3ece3dba18c00b3c189f516e88e
--- /dev/null
+++ b/examples/myapp-gnome-gomod/go.sum
@@ -0,0 +1,10 @@
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba h1:KLfa3f81PhSXNMZs7lJjS/TK1WmMCCjENHr29n+N8BU=
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba/go.mod h1:4akg2uvMr36H/vDzQSPofcff2LBk4u+bTAPy2bxVoOo=
+github.com/goccy/go-yaml v1.18.0 h1:8W7wMFS12Pcas7KU+VVkaiCng+kG8QiFeFwzFb+rwuw=
+github.com/goccy/go-yaml v1.18.0/go.mod h1:XBurs7gK8ATbW4ZPGKgcbrY1Br56PdM69F7LkFRi1kA=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 h1:kQ0LX4ffJvtONhymro3HzrB8XUa6dIGgrbnkl38Rgl0=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42/go.mod h1:amE5lVGstyh2GTEIHFEbgJHmoMD0llIuapnzIlZx7Fc=
+github.com/pojntfx/go-gettext v0.2.0 h1:Nw3Hyy0Fef3pOuvYYPZESmbOT+IdnYjqx9/ywFo46GU=
+github.com/pojntfx/go-gettext v0.2.0/go.mod h1:eGt2r0JKvlPZjiz+GqEDtg92//F30LEV/IB0h42bk40=
+golang.org/x/mod v0.30.0 h1:fDEXFVZ/fmCKProc/yAXXUijritrDzahmwwefnjoPFk=
+golang.org/x/mod v0.30.0/go.mod h1:lAsf5O2EvJeSFMiBxXDki7sCgAxEUcZHXoXMKT4GJKc=
diff --git a/examples/myapp-gnome-gomod/io.github.puregotk.MyAppGnomeGomod.json b/examples/myapp-gnome-gomod/io.github.puregotk.MyAppGnomeGomod.json
new file mode 100644
index 0000000000000000000000000000000000000000..a19adeb49c77cc7f33f741d0356d62bd1cf0f0e6
--- /dev/null
+++ b/examples/myapp-gnome-gomod/io.github.puregotk.MyAppGnomeGomod.json
@@ -0,0 +1,56 @@
+{
+  "id": "io.github.puregotk.MyAppGnomeGomod",
+  "runtime": "org.gnome.Platform",
+  "runtime-version": "49",
+  "sdk": "org.gnome.Sdk",
+  "sdk-extensions": ["org.freedesktop.Sdk.Extension.golang"],
+  "command": "myapp-gnome-gomod",
+  "build-options": {
+    "append-path": "/usr/lib/sdk/golang/bin",
+    "build-args": ["--filesystem=home"]
+  },
+  "finish-args": [
+    "--socket=wayland",
+    "--socket=fallback-x11",
+    "--share=ipc",
+    "--device=dri"
+  ],
+  "modules": [
+    {
+      "name": "mylib-gtk-meson",
+      "buildsystem": "meson",
+      "sources": [
+        {
+          "type": "dir",
+          "path": "../..",
+          "dest": "vendor/github.com/jwijenbergh/puregotk"
+        },
+        { "type": "dir", "path": "../mylib-gtk-meson/" },
+        "mylibgtkmeson.go.mod.json"
+      ]
+    },
+    {
+      "name": "myapp-gnome-gomod",
+      "buildsystem": "simple",
+      "build-commands": [
+        "mkdir -p vendor && cp modules.txt vendor/modules.txt",
+        ". /usr/lib/sdk/golang/enable.sh && export GOBIN=\"/app/bin\" && go generate ./... && go build -o /app/bin/myapp-gnome-gomod -v -mod=vendor -ldflags='-X main.LocaleDir=/app/share/locale' ./src",
+        "mkdir -p /app/share/locale && (cd po && find . -name '*.mo' -exec cp --parents {} /app/share/locale/ \\;)"
+      ],
+      "sources": [
+        { "type": "dir", "path": "." },
+        {
+          "type": "dir",
+          "path": "../..",
+          "dest": "vendor/github.com/jwijenbergh/puregotk"
+        },
+        {
+          "type": "dir",
+          "path": "../mylib-gtk-go-meson",
+          "dest": "vendor/github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson"
+        },
+        "go.mod.json"
+      ]
+    }
+  ]
+}
diff --git a/examples/myapp-gnome-gomod/modules.txt b/examples/myapp-gnome-gomod/modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..39e422f3ec7eb0f6927e4eda97e1d85d0a2bc2d3
--- /dev/null
+++ b/examples/myapp-gnome-gomod/modules.txt
@@ -0,0 +1,50 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-gtk-go-meson
+## explicit; go 1.25.0
+github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson/mylibgtkmeson
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-gnome-gomod/mylibgtkmeson.go.mod.json b/examples/myapp-gnome-gomod/mylibgtkmeson.go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..4c14be6233abdd6e8732c5cf1bf45d0e5bf7613a
--- /dev/null
+++ b/examples/myapp-gnome-gomod/mylibgtkmeson.go.mod.json
@@ -0,0 +1,43 @@
+[
+  {
+    "dest": "vendor",
+    "dest-filename": "modules.txt",
+    "path": "mylibgtkmeson.modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-gnome-gomod/mylibgtkmeson.modules.txt b/examples/myapp-gnome-gomod/mylibgtkmeson.modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..60632ece613f6443e54bbc29fa4c607f72225e92
--- /dev/null
+++ b/examples/myapp-gnome-gomod/mylibgtkmeson.modules.txt
@@ -0,0 +1,47 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-gnome-meson/go.mod b/examples/myapp-gnome-meson/go.mod
new file mode 100644
index 0000000000000000000000000000000000000000..5d89505b2f8e2fe8fcb06a49790a291b89cb86b6
--- /dev/null
+++ b/examples/myapp-gnome-meson/go.mod
@@ -0,0 +1,23 @@
+module github.com/jwijenbergh/puregotk/examples/myapp-gnome-meson
+
+go 1.25.0
+
+tool github.com/dennwc/flatpak-go-mod
+
+require (
+	github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000
+	github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson v0.0.0-00010101000000-000000000000
+	github.com/pojntfx/go-gettext v0.2.0
+)
+
+require (
+	github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba // indirect
+	github.com/goccy/go-yaml v1.18.0 // indirect
+	github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 // indirect
+	golang.org/x/mod v0.30.0 // indirect
+)
+
+replace (
+	github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+	github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-gtk-go-meson
+)
diff --git a/examples/myapp-gnome-meson/go.mod.json b/examples/myapp-gnome-meson/go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..ef6bcba42f5b273dea111518764719a9617ef80f
--- /dev/null
+++ b/examples/myapp-gnome-meson/go.mod.json
@@ -0,0 +1,42 @@
+[
+  {
+    "dest": "vendor",
+    "path": "modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-gnome-meson/io.github.puregotk.MyAppGnomeMeson.json b/examples/myapp-gnome-meson/io.github.puregotk.MyAppGnomeMeson.json
new file mode 100644
index 0000000000000000000000000000000000000000..fa5686bf9f0f76ce5812c0a6e0c41b6b3b6d16e8
--- /dev/null
+++ b/examples/myapp-gnome-meson/io.github.puregotk.MyAppGnomeMeson.json
@@ -0,0 +1,51 @@
+{
+  "id": "io.github.puregotk.MyAppGnomeMeson",
+  "runtime": "org.gnome.Platform",
+  "runtime-version": "49",
+  "sdk": "org.gnome.Sdk",
+  "sdk-extensions": ["org.freedesktop.Sdk.Extension.golang"],
+  "command": "myapp-gnome-meson",
+  "build-options": {
+    "append-path": "/usr/lib/sdk/golang/bin",
+    "build-args": ["--filesystem=home"]
+  },
+  "finish-args": [
+    "--socket=wayland",
+    "--socket=fallback-x11",
+    "--share=ipc",
+    "--device=dri"
+  ],
+  "modules": [
+    {
+      "name": "mylib-gtk-meson",
+      "buildsystem": "meson",
+      "sources": [
+        {
+          "type": "dir",
+          "path": "../..",
+          "dest": "vendor/github.com/jwijenbergh/puregotk"
+        },
+        { "type": "dir", "path": "../mylib-gtk-meson/" },
+        "mylibgtkmeson.go.mod.json"
+      ]
+    },
+    {
+      "name": "myapp-gnome-meson",
+      "buildsystem": "meson",
+      "sources": [
+        { "type": "dir", "path": "." },
+        {
+          "type": "dir",
+          "path": "../..",
+          "dest": "vendor/github.com/jwijenbergh/puregotk"
+        },
+        {
+          "type": "dir",
+          "path": "../mylib-gtk-go-meson",
+          "dest": "vendor/github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson"
+        },
+        "go.mod.json"
+      ]
+    }
+  ]
+}
diff --git a/examples/myapp-gnome-meson/meson.build b/examples/myapp-gnome-meson/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..a752283d0e8198e85d326e1eb6d9c1502e9d1a42
--- /dev/null
+++ b/examples/myapp-gnome-meson/meson.build
@@ -0,0 +1,14 @@
+project(
+    'myapp-gnome-meson',
+    'c',
+    version: '0.1.0',
+    meson_version: '>= 1.0.0',
+    default_options: [],
+)
+add_project_arguments(['-I' + meson.project_build_root()], language: 'c')
+
+i18n = import('i18n')
+gnome = import('gnome')
+
+subdir('src')
+subdir('po')
diff --git a/examples/myapp-gnome-meson/modules.txt b/examples/myapp-gnome-meson/modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..39e422f3ec7eb0f6927e4eda97e1d85d0a2bc2d3
--- /dev/null
+++ b/examples/myapp-gnome-meson/modules.txt
@@ -0,0 +1,50 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson v0.0.0-00010101000000-000000000000 => ../mylib-gtk-go-meson
+## explicit; go 1.25.0
+github.com/jwijenbergh/puregotk/examples/mylib-gtk-go-meson/mylibgtkmeson
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/myapp-gnome-meson/mylibgtkmeson.go.mod.json b/examples/myapp-gnome-meson/mylibgtkmeson.go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..4c14be6233abdd6e8732c5cf1bf45d0e5bf7613a
--- /dev/null
+++ b/examples/myapp-gnome-meson/mylibgtkmeson.go.mod.json
@@ -0,0 +1,43 @@
+[
+  {
+    "dest": "vendor",
+    "dest-filename": "modules.txt",
+    "path": "mylibgtkmeson.modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/myapp-gnome-meson/mylibgtkmeson.modules.txt b/examples/myapp-gnome-meson/mylibgtkmeson.modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..60632ece613f6443e54bbc29fa4c607f72225e92
--- /dev/null
+++ b/examples/myapp-gnome-meson/mylibgtkmeson.modules.txt
@@ -0,0 +1,47 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver
diff --git a/examples/mylib-gtk-meson/go.mod b/examples/mylib-gtk-meson/go.mod
new file mode 100644
index 0000000000000000000000000000000000000000..ea5a983cddb294c987db03450b3acacf789da71c
--- /dev/null
+++ b/examples/mylib-gtk-meson/go.mod
@@ -0,0 +1,19 @@
+module github.com/jwijenbergh/puregotk/examples/mylib-gtk-meson
+
+go 1.25.0
+
+tool github.com/dennwc/flatpak-go-mod
+
+require (
+	github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000
+	github.com/pojntfx/go-gettext v0.2.0
+)
+
+require (
+	github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba // indirect
+	github.com/goccy/go-yaml v1.18.0 // indirect
+	github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 // indirect
+	golang.org/x/mod v0.30.0 // indirect
+)
+
+replace github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
diff --git a/examples/mylib-gtk-meson/go.mod.json b/examples/mylib-gtk-meson/go.mod.json
new file mode 100644
index 0000000000000000000000000000000000000000..ef6bcba42f5b273dea111518764719a9617ef80f
--- /dev/null
+++ b/examples/mylib-gtk-meson/go.mod.json
@@ -0,0 +1,42 @@
+[
+  {
+    "dest": "vendor",
+    "path": "modules.txt",
+    "type": "file"
+  },
+  {
+    "dest": "vendor/github.com/pojntfx/go-gettext",
+    "sha256": "a1e286161e04c4d7f02cd3ef9185df7be7ccf85daf9349a0974ed42746827fb4",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/pojntfx/go-gettext/@v/v0.2.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/dennwc/flatpak-go-mod",
+    "sha256": "6e03ab0507858ecf873ae22fbddaa87788ac97df8d533fe742cf79bd57861a1f",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/dennwc/flatpak-go-mod/@v/v0.1.1-0.20251127123506-956509dd96ba.zip"
+  },
+  {
+    "dest": "vendor/github.com/goccy/go-yaml",
+    "sha256": "51bf59a85a7e3e2b8e83e5f376a3229b01b673a39601c99e3a2c05931cc3e339",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/goccy/go-yaml/@v/v1.18.0.zip"
+  },
+  {
+    "dest": "vendor/github.com/jwijenbergh/purego",
+    "sha256": "aa4903b6c7333843f77e6012d68c89846462f4755fe6201a4069e69547d1000e",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20251017112123-b71757b9ba42.zip"
+  },
+  {
+    "dest": "vendor/golang.org/x/mod",
+    "sha256": "dffdae50c0a7903e522053e8e9880069ed1854446326f954cf903f713678c3a2",
+    "strip-components": 3,
+    "type": "archive",
+    "url": "https://proxy.golang.org/golang.org/x/mod/@v/v0.30.0.zip"
+  }
+]
diff --git a/examples/mylib-gtk-meson/go.sum b/examples/mylib-gtk-meson/go.sum
new file mode 100644
index 0000000000000000000000000000000000000000..b5efb4cd10b1b3ece3dba18c00b3c189f516e88e
--- /dev/null
+++ b/examples/mylib-gtk-meson/go.sum
@@ -0,0 +1,10 @@
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba h1:KLfa3f81PhSXNMZs7lJjS/TK1WmMCCjENHr29n+N8BU=
+github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba/go.mod h1:4akg2uvMr36H/vDzQSPofcff2LBk4u+bTAPy2bxVoOo=
+github.com/goccy/go-yaml v1.18.0 h1:8W7wMFS12Pcas7KU+VVkaiCng+kG8QiFeFwzFb+rwuw=
+github.com/goccy/go-yaml v1.18.0/go.mod h1:XBurs7gK8ATbW4ZPGKgcbrY1Br56PdM69F7LkFRi1kA=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42 h1:kQ0LX4ffJvtONhymro3HzrB8XUa6dIGgrbnkl38Rgl0=
+github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42/go.mod h1:amE5lVGstyh2GTEIHFEbgJHmoMD0llIuapnzIlZx7Fc=
+github.com/pojntfx/go-gettext v0.2.0 h1:Nw3Hyy0Fef3pOuvYYPZESmbOT+IdnYjqx9/ywFo46GU=
+github.com/pojntfx/go-gettext v0.2.0/go.mod h1:eGt2r0JKvlPZjiz+GqEDtg92//F30LEV/IB0h42bk40=
+golang.org/x/mod v0.30.0 h1:fDEXFVZ/fmCKProc/yAXXUijritrDzahmwwefnjoPFk=
+golang.org/x/mod v0.30.0/go.mod h1:lAsf5O2EvJeSFMiBxXDki7sCgAxEUcZHXoXMKT4GJKc=
diff --git a/examples/mylib-gtk-meson/io.github.puregotk.MyLibGtkMesonExample.json b/examples/mylib-gtk-meson/io.github.puregotk.MyLibGtkMesonExample.json
new file mode 100644
index 0000000000000000000000000000000000000000..149ae6e60178ea413bfa8f131b02f9f0314712c7
--- /dev/null
+++ b/examples/mylib-gtk-meson/io.github.puregotk.MyLibGtkMesonExample.json
@@ -0,0 +1,39 @@
+{
+  "id": "io.github.puregotk.MyLibGtkMesonExample",
+  "runtime": "org.gnome.Platform",
+  "runtime-version": "49",
+  "sdk": "org.gnome.Sdk",
+  "sdk-extensions": ["org.freedesktop.Sdk.Extension.golang"],
+  "command": "example.js",
+  "build-options": {
+    "append-path": "/usr/lib/sdk/golang/bin",
+    "build-args": ["--filesystem=home"]
+  },
+  "finish-args": [
+    "--socket=wayland",
+    "--socket=fallback-x11",
+    "--share=ipc",
+    "--device=dri"
+  ],
+  "modules": [
+    {
+      "name": "mylib-gtk-meson",
+      "buildsystem": "meson",
+      "sources": [
+        { "type": "dir", "path": "." },
+        {
+          "type": "dir",
+          "path": "../..",
+          "dest": "vendor/github.com/jwijenbergh/puregotk"
+        },
+        "go.mod.json"
+      ]
+    },
+    {
+      "name": "mylib-gtk-meson-example",
+      "buildsystem": "simple",
+      "build-commands": ["install -Dm755 example.js /app/bin/example.js"],
+      "sources": [{ "type": "file", "path": "example.js" }]
+    }
+  ]
+}
diff --git a/examples/mylib-gtk-meson/meson.build b/examples/mylib-gtk-meson/meson.build
new file mode 100644
index 0000000000000000000000000000000000000000..97af9d7a623b5ec94d06dd84b43887b44ca93e75
--- /dev/null
+++ b/examples/mylib-gtk-meson/meson.build
@@ -0,0 +1,13 @@
+project(
+    'mylib-gtk-meson',
+    'c',
+    version: '0.1.0',
+    meson_version: '>= 1.0.0',
+    default_options: [],
+)
+add_project_arguments(['-I' + meson.project_build_root()], language: 'c')
+
+i18n = import('i18n')
+
+subdir('src')
+subdir('po')
diff --git a/examples/mylib-gtk-meson/modules.txt b/examples/mylib-gtk-meson/modules.txt
new file mode 100644
index 0000000000000000000000000000000000000000..60632ece613f6443e54bbc29fa4c607f72225e92
--- /dev/null
+++ b/examples/mylib-gtk-meson/modules.txt
@@ -0,0 +1,47 @@
+# github.com/dennwc/flatpak-go-mod v0.1.1-0.20251127123506-956509dd96ba
+## explicit; go 1.24.4
+github.com/dennwc/flatpak-go-mod
+# github.com/goccy/go-yaml v1.18.0
+## explicit; go 1.21.0
+github.com/goccy/go-yaml
+github.com/goccy/go-yaml/ast
+github.com/goccy/go-yaml/internal/errors
+github.com/goccy/go-yaml/internal/format
+github.com/goccy/go-yaml/lexer
+github.com/goccy/go-yaml/parser
+github.com/goccy/go-yaml/printer
+github.com/goccy/go-yaml/scanner
+github.com/goccy/go-yaml/token
+# github.com/jwijenbergh/purego v0.0.0-20251017112123-b71757b9ba42
+## explicit; go 1.18
+github.com/jwijenbergh/purego
+github.com/jwijenbergh/purego/internal/cgo
+github.com/jwijenbergh/purego/internal/fakecgo
+github.com/jwijenbergh/purego/internal/strings
+github.com/jwijenbergh/purego/internal/xreflect
+# github.com/jwijenbergh/puregotk v0.0.0-00010101000000-000000000000 => ../..
+## explicit; go 1.23.0
+github.com/jwijenbergh/puregotk/internal/core
+github.com/jwijenbergh/puregotk/pkg/core
+github.com/jwijenbergh/puregotk/v4/adw
+github.com/jwijenbergh/puregotk/v4/cairo
+github.com/jwijenbergh/puregotk/v4/gdk
+github.com/jwijenbergh/puregotk/v4/gdkpixbuf
+github.com/jwijenbergh/puregotk/v4/gio
+github.com/jwijenbergh/puregotk/v4/glib
+github.com/jwijenbergh/puregotk/v4/gmodule
+github.com/jwijenbergh/puregotk/v4/gobject
+github.com/jwijenbergh/puregotk/v4/gobject/types
+github.com/jwijenbergh/puregotk/v4/graphene
+github.com/jwijenbergh/puregotk/v4/gsk
+github.com/jwijenbergh/puregotk/v4/gtk
+github.com/jwijenbergh/puregotk/v4/pango
+# github.com/pojntfx/go-gettext v0.2.0
+## explicit; go 1.25.0
+github.com/pojntfx/go-gettext/pkg/i18n
+# golang.org/x/mod v0.30.0
+## explicit; go 1.24.0
+golang.org/x/mod/internal/lazyregexp
+golang.org/x/mod/modfile
+golang.org/x/mod/module
+golang.org/x/mod/semver

