From acdedf55a37dca28d05e6dbb0f3f794e1b72e029 Mon Sep 17 00:00:00 2001
From: Felicitas Pojtinger <felicitas@pojtinger.com>
Date: Thu, 26 Feb 2026 23:57:38 -0800
Subject: [PATCH] docs: Add section on the iteration cycle with `systemd-sysext`

Signed-off-by: Felicitas Pojtinger <felicitas@pojtinger.com>
---
diff --git a/docs/new/build.md b/docs/new/build.md
index cadae0bd5a7dd60658f31f8d021fd9eb78da844e..e657c8a9dd08034ffe4118fc015c824c15fae169 100644
--- a/docs/new/build.md
+++ b/docs/new/build.md
@@ -17,19 +17,25 @@ ```
 
 ## Making changes
 
-First, create a workspace for the GNOME OS components you want to work on; for example for the kernel:
+First, create a workspace for the GNOME OS components you want to work on; for example for the Linux kernel:
 
 ```shell
 $ bst workspace open freedesktop-sdk.bst:components/linux.bst --directory ../linux/
 ```
 
-Or for [Text Editor](https://apps.gnome.org/TextEditor/):
+For [GNOME Shell](https://gitlab.gnome.org/GNOME/gnome-shell):
 
 ```shell
-$ bst workspace open sdk/gnome-text-editor.bst --directory ../gnome-text-editor/
+$ bst workspace open core/gnome-shell.bst --directory ../gnome-shell/
 ```
 
-Now make the changes you want to make in your workspace, for example `../linux`. BuildStream will pick up your changes from this workspace automatically after you make them.
+Or for [GNOME Settings](https://apps.gnome.org/Settings/):
+
+```shell
+$ bst workspace open core/gnome-control-center.bst --directory ../gnome-control-center/
+```
+
+Now make the changes you want to make in your workspace, for example in `../linux` or `../gnome-control-center`. BuildStream will pick up your changes from this workspace automatically after you make them.
 
 ## Setting up secure boot keys
 
@@ -52,7 +58,7 @@
 To build the virtual machine image, run the following:
 
 ```shell
-$ bst build vm-secure/image.bst # You can pass --no-strict to avoid rebuilding the whole chain on the next run
+$ bst build vm-secure/image.bst # Use `bst --no-strict` to avoid rebuilding the whole chain on the next run
 ```
 
 You can now start it by running the following:
@@ -66,20 +72,53 @@
 To build an ISO with BuildStream, run the following:
 
 ```shell
-$ bst build gnomeos/live-image.bst # You can pass --no-strict to avoid rebuilding the whole chain on the next run
+$ bst build gnomeos/live-image.bst # Use `bst --no-strict` to avoid rebuilding the whole chain on the next run
 $ bst artifact checkout gnomeos/live-image.bst --directory ./iso
 ```
 
-You can now write the ISO to a USB stick and boot it on physical hardware or boot it in a virtual machine.
+You can now write the ISO to a USB stick and boot from it on physical hardware, or manually boot from it in a virtual machine.
+
+## Option 3: Building and deploying to your workstation via system extensions (`systemd-sysext`)
+
+> While this works for any of the included apps too, not just system components, iterating on apps directly using Flatpak via for example [GNOME Builder](https://apps.gnome.org/Builder/) or [Foundry](https://gitlab.gnome.org/GNOME/foundry) is preferred.
+
+To build a component, first open a workspace for it as described in [Making changes](#making-changes), then run the following to build a system extension for it:
+
+```shell
+$ bst build core/gnome-control-center.bst # Use `bst --no-strict` to avoid rebuilding the whole chain on the next run
+$ sysext-build-element --verbose zz-gnome-control-center core/gnome-control-center.bst
+```
+
+> system extensions are applied alphabetically, so you want to prefix them (as we did above with `zz-`) in order to avoid being overwritten by other images that will be loaded.
+
+Now you can deploy it to your workstation:
 
-## Option 3: Building and deploying to your workstation via systemd-sysext
+```shell
+$ run0 sysext-add --persistent zz-gnome-control-center.sysext.raw
+$ run0 systemd-sysext refresh
+```
 
-<!-- TODO: Add instructions -->
+If the component includes systemd units, reload the daemon by running the following:
 
-## Option 4: Deploying to your workstation via systemd-sysupdate
+```shell
+$ run0 systemctl daemon-reload
+```
+
+To remove the system extension from your workstation, run the following:
+
+```shell
+$ run0 rm /var/lib/extensions/zz-gnome-control-center.sysext.raw
+$ run0 systemd-sysext refresh
+```
+
+## Option 4: Deploying to your workstation via `systemd-sysupdate`
 
 <!-- TODO: Add instructions -->
 
-## Option 5: Deploying to a different workstation via systemd-sysupdate
+<!-- TODO: Make sure we show how to remove it again as well -->
+
+## Option 5: Deploying to a different workstation via `systemd-sysupdate`
 
 <!-- TODO: Add instructions -->
+
+<!-- TODO: Make sure we show how to remove it again as well -->

