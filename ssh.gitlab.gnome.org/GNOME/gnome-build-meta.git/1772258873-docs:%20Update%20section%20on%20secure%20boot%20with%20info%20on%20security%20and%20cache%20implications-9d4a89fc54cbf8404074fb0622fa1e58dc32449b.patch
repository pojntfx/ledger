From 9d4a89fc54cbf8404074fb0622fa1e58dc32449b Mon Sep 17 00:00:00 2001
From: Felicitas Pojtinger <felicitas@pojtinger.com>
Date: Fri, 27 Feb 2026 22:07:53 -0800
Subject: [PATCH] docs: Update section on secure boot with info on security and cache implications

Signed-off-by: Felicitas Pojtinger <felicitas@pojtinger.com>
---
diff --git a/docs/new/build.md b/docs/new/build.md
index 0c1b2b681bb09261301e44451a285a2dc8504e19..36bdabf78b8292b75914fcc2f2ee6f97ceada63f 100644
--- a/docs/new/build.md
+++ b/docs/new/build.md
@@ -1,6 +1,10 @@
-# Building GNOME OS
+# Contributing to the GNOME Build Metadata repository/GNOME OS
 
-## Setting up the build environment
+## 1. Forking and cloning the GNOME Build Metadata repository
+
+<!-- TODO: Add section on forking and cloning the GNOME Build Metadata repository, plus joining Matrix for help -->
+
+## 2. Setting up the build environment
 
 GNOME OS a [BuildStream](https://www.buildstream.build/) project. If you're using GNOME OS as your developer workstation, you can set up all the tools and dependencies you need to build GNOME OS by enabling the `devel` extension:
 
@@ -15,7 +19,28 @@ $ toolbox create -i registry.gitlab.com/freedesktop-sdk/infrastructure/freedesktop-sdk-docker-images/bst2
 $ toolbox enter bst2
 ```
 
-## Making changes
+## 2. Setting up secure boot keys
+
+Before building images, you need to generate secure boot keys. For fast local development, you can use the `snakeoil` keys; these are the same keys CI/CD uses, which means that you can re-use the CI/CD caches for your local builds instead of rebuilding everything from source. Keep in mind however that these keys are publicly known and as a result provide zero security. To use then, run the following:
+
+```shell
+$ make -C files/boot-keys clean
+$ make -C files/boot-keys IMPORT_MODE=snakeoil
+```
+
+If you want to deploy your local builds to your system, use the `local` import mode, which uses the snakeoil keys for the bootloader components but generates random keys for all other components by running the following:
+
+```shell
+$ make -C files/boot-keys clean
+$ make -C files/boot-keys IMPORT_MODE=local
+```
+
+You can also generate completely fresh keys, which causes all components to be rebuilt by running the following:
+
+```shell
+$ make -C files/boot-keys clean
+$ make -C files/boot-keys
+```
 
 First, create a workspace for the GNOME OS components you want to work on; for example for the Linux kernel:
 

